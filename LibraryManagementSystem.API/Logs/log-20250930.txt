2025-09-30 14:58:08.174 +03:00 [INF] Starting database seeding.
2025-09-30 14:58:09.832 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 14:58:15.175 +03:00 [INF] Executed DbCommand (193ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 14:58:15.334 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 14:58:15.343 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 14:58:15.381 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 14:58:15.482 +03:00 [INF] Database seeding finished successfully.
2025-09-30 14:58:17.318 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-30 14:58:17.323 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-30 14:58:17.619 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 14:58:17.623 +03:00 [INF] Hosting environment: Development
2025-09-30 14:58:17.628 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-30 14:58:32.716 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 14:58:32.937 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 241.2206ms
2025-09-30 14:58:33.132 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 14:58:37.055 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/29/2025 4:27:05 PM', Current time (UTC): '9/30/2025 11:58:37 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-30 14:58:37.087 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/29/2025 4:27:05 PM', Current time (UTC): '9/30/2025 11:58:37 AM'.
2025-09-30 14:58:37.106 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-30 14:58:37.130 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-30 14:58:37.143 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 401 0 null 4011.8204ms
2025-09-30 14:59:11.494 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Token/Refresh - application/json 505
2025-09-30 14:59:11.508 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Token/Refresh - 307 0 null 13.5802ms
2025-09-30 14:59:11.529 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Token/Refresh - application/json 505
2025-09-30 14:59:11.578 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 14:59:11.582 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 14:59:11.586 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 14:59:11.595 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 14:59:11.600 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 14:59:11.605 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 14:59:11.625 +03:00 [INF] Incomming Request: POST /api/Token/Refresh
2025-09-30 14:59:11.633 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.TokenController.Refresh (LibraryManagementSystem.API)'
2025-09-30 14:59:11.693 +03:00 [INF] Route matched with {action = "Refresh", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(LibraryManagementSystem.Business.Dtos.AccountDtos.TokenDto) on controller LibraryManagementSystem.API.Controllers.TokenController (LibraryManagementSystem.API).
2025-09-30 14:59:12.233 +03:00 [INF] Executing an action Refresh on controller Token.
2025-09-30 14:59:12.492 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 14:59:12.597 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 14:59:12.666 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 14:59:12.693 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 14:59:12.960 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-30 14:59:13.012 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.AccountDtos.TokenDto'.
2025-09-30 14:59:13.034 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.TokenController.Refresh (LibraryManagementSystem.API) in 1323.5101ms
2025-09-30 14:59:13.041 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.TokenController.Refresh (LibraryManagementSystem.API)'
2025-09-30 14:59:13.047 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 14:59:13.056 +03:00 [INF] Generating expiration headers.
2025-09-30 14:59:13.061 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:00:13 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 14:59:13.072 +03:00 [INF] Generating Validation headers.
2025-09-30 14:59:13.108 +03:00 [INF] Validation headers generated. ETag: Strong, "0283F65D28B8E81C0D602117B6249A1E". Last-Modified: Tue, 30 Sep 2025 11:59:13 GMT
2025-09-30 14:59:13.112 +03:00 [INF] Generating Vary header.
2025-09-30 14:59:13.115 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 14:59:13.142 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Token/Refresh - 200 null application/json; charset=utf-8 1612.1798ms
2025-09-30 14:59:43.555 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 14:59:43.580 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 27.1547ms
2025-09-30 14:59:43.587 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 14:59:43.653 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 14:59:43.662 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-30 14:59:43.667 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 14:59:43.670 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 14:59:43.673 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 14:59:43.677 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 14:59:43.681 +03:00 [INF] Incomming Request: GET /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 14:59:43.685 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 14:59:43.700 +03:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 14:59:43.723 +03:00 [INF] Executing an action GetById on controller Users.
2025-09-30 14:59:43.869 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [AspNetUsers] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-30 14:59:43.985 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 14:59:44.001 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.UserDtos.UserProfileDto'.
2025-09-30 14:59:44.019 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API) in 310.3495ms
2025-09-30 14:59:44.026 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 14:59:44.030 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 14:59:44.034 +03:00 [INF] Generating expiration headers.
2025-09-30 14:59:44.038 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:00:44 GMT. Cache-Control: public,max-age=60.
2025-09-30 14:59:44.042 +03:00 [INF] Generating Validation headers.
2025-09-30 14:59:44.048 +03:00 [INF] Validation headers generated. ETag: Strong, "7B3459079D256630AAEBAD14B87A2859". Last-Modified: Tue, 30 Sep 2025 11:59:44 GMT
2025-09-30 14:59:44.053 +03:00 [INF] Generating Vary header.
2025-09-30 14:59:44.058 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 14:59:44.064 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 200 null application/json; charset=utf-8 477.0305ms
2025-09-30 15:00:06.761 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:00:06.814 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 53.6188ms
2025-09-30 15:00:06.823 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:00:06.870 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:00:06.876 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:00:06.880 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:00:06.884 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:00:06.889 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-30 15:00:06.893 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:00:06.897 +03:00 [INF] Incomming Request: PUT /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 15:00:06.904 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Update (LibraryManagementSystem.API)'
2025-09-30 15:00:06.921 +03:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(System.String, LibraryManagementSystem.Business.Dtos.UserDtos.UpdateUserProfileDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:00:06.954 +03:00 [INF] Executing an action Update on controller Users.
2025-09-30 15:00:06.982 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:02:45.275 +03:00 [INF] Starting database seeding.
2025-09-30 15:02:45.740 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 15:02:48.385 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:02:48.542 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:02:48.548 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:02:48.567 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:02:48.614 +03:00 [INF] Database seeding finished successfully.
2025-09-30 15:02:49.376 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-30 15:02:49.378 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-30 15:02:49.701 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 15:02:49.705 +03:00 [INF] Hosting environment: Development
2025-09-30 15:02:49.709 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-30 15:03:25.945 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:03:26.103 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 146.4306ms
2025-09-30 15:03:26.206 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:03:26.547 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:03:26.552 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:03:26.555 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:03:26.562 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:03:26.573 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-30 15:03:26.576 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:03:26.589 +03:00 [INF] Incomming Request: PUT /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 15:03:26.597 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Update (LibraryManagementSystem.API)'
2025-09-30 15:03:26.658 +03:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(System.String, LibraryManagementSystem.Business.Dtos.UserDtos.UpdateUserProfileDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:03:27.060 +03:00 [INF] Executing an action Update on controller Users.
2025-09-30 15:03:27.270 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:04:34.459 +03:00 [INF] Starting database seeding.
2025-09-30 15:04:35.281 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 15:04:37.515 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:04:37.621 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:04:37.631 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:04:37.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:04:37.706 +03:00 [INF] Database seeding finished successfully.
2025-09-30 15:04:38.312 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-30 15:04:38.318 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-30 15:04:38.624 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 15:04:38.627 +03:00 [INF] Hosting environment: Development
2025-09-30 15:04:38.631 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-30 15:04:42.384 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:04:42.561 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 219.266ms
2025-09-30 15:04:42.686 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:04:43.056 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:04:43.060 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:04:43.062 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:04:43.070 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:04:43.082 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-30 15:04:43.086 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:04:43.097 +03:00 [INF] Incomming Request: PUT /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 15:04:43.104 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Update (LibraryManagementSystem.API)'
2025-09-30 15:04:43.176 +03:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(System.String, LibraryManagementSystem.Business.Dtos.UserDtos.UpdateUserProfileDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:04:43.723 +03:00 [INF] Executing an action Update on controller Users.
2025-09-30 15:04:44.031 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:04:44.170 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Persons] AS [p]
WHERE [p].[Id] = @__id_0
2025-09-30 15:04:44.598 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Persons] SET [FirstName] = @p0, [LastName] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-09-30 15:04:44.708 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:04:44.735 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:04:44.857 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-30 15:04:44.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:04:44.899 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:04:44.914 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-30 15:04:44.933 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:04:44.948 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:04:44.964 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-30 15:04:44.995 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-30 15:04:45.010 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Update (LibraryManagementSystem.API) in 1816.7466ms
2025-09-30 15:04:45.016 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Update (LibraryManagementSystem.API)'
2025-09-30 15:04:45.020 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:04:45.029 +03:00 [INF] Generating expiration headers.
2025-09-30 15:04:45.036 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:05:45 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:04:45.047 +03:00 [INF] Generating Validation headers.
2025-09-30 15:04:45.099 +03:00 [INF] Validation headers generated. ETag: Strong, "248F0B145D74A5D7C74283CC2BE54ADE". Last-Modified: Tue, 30 Sep 2025 12:04:45 GMT
2025-09-30 15:04:45.106 +03:00 [INF] Generating Vary header.
2025-09-30 15:04:45.111 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:04:45.145 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 204 null null 2459.7349ms
2025-09-30 15:04:54.414 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:04:54.428 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 14.247ms
2025-09-30 15:04:54.433 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:04:54.453 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:04:54.456 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-30 15:04:54.459 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:04:54.461 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:04:54.464 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:04:54.466 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:04:54.469 +03:00 [INF] Incomming Request: GET /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 15:04:54.475 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 15:04:54.492 +03:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:04:54.512 +03:00 [INF] Executing an action GetById on controller Users.
2025-09-30 15:04:54.652 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [AspNetUsers] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-30 15:04:54.702 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 15:04:54.740 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.UserDtos.UserProfileDto'.
2025-09-30 15:04:54.760 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API) in 257.8974ms
2025-09-30 15:04:54.769 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 15:04:54.778 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:04:54.783 +03:00 [INF] Generating expiration headers.
2025-09-30 15:04:54.790 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:05:54 GMT. Cache-Control: public,max-age=60.
2025-09-30 15:04:54.796 +03:00 [INF] Generating Validation headers.
2025-09-30 15:04:54.798 +03:00 [INF] Validation headers generated. ETag: Strong, "30257841D6F17AB03BCD28806899B8F1". Last-Modified: Tue, 30 Sep 2025 12:04:54 GMT
2025-09-30 15:04:54.802 +03:00 [INF] Generating Vary header.
2025-09-30 15:04:54.804 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:04:54.808 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 200 null application/json; charset=utf-8 374.7136ms
2025-09-30 15:05:51.550 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:05:51.567 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 18.1269ms
2025-09-30 15:05:51.576 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:05:51.606 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:05:51.609 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:05:51.612 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:05:51.614 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:05:51.617 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-30 15:05:51.622 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:05:51.624 +03:00 [INF] Incomming Request: PUT /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 15:05:51.628 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Update (LibraryManagementSystem.API)'
2025-09-30 15:05:51.632 +03:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(System.String, LibraryManagementSystem.Business.Dtos.UserDtos.UpdateUserProfileDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:05:51.664 +03:00 [INF] Executing an action Update on controller Users.
2025-09-30 15:05:51.673 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:05:51.695 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Persons] AS [p]
WHERE [p].[Id] = @__id_0
2025-09-30 15:05:53.905 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:05:53.994 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:05:54.016 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-30 15:07:23.807 +03:00 [INF] Starting database seeding.
2025-09-30 15:07:24.328 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 15:07:26.979 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:07:27.107 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:07:27.115 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:07:27.140 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:07:27.224 +03:00 [INF] Database seeding finished successfully.
2025-09-30 15:07:28.001 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-30 15:07:28.007 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-30 15:07:28.411 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 15:07:28.415 +03:00 [INF] Hosting environment: Development
2025-09-30 15:07:28.419 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-30 15:07:35.668 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:07:35.810 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 159.8334ms
2025-09-30 15:07:35.942 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:07:36.315 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:07:36.318 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:07:36.322 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:07:36.328 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:07:36.337 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-30 15:07:36.339 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:07:36.354 +03:00 [INF] Incomming Request: PUT /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 15:07:36.361 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Update (LibraryManagementSystem.API)'
2025-09-30 15:07:36.429 +03:00 [INF] Route matched with {action = "Update", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(System.String, LibraryManagementSystem.Business.Dtos.UserDtos.UpdateUserProfileDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:07:37.103 +03:00 [INF] Executing an action Update on controller Users.
2025-09-30 15:07:37.384 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:07:37.499 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Persons] AS [p]
WHERE [p].[Id] = @__id_0
2025-09-30 15:07:37.966 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:07:38.006 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:07:38.402 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-30 15:07:38.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:07:38.447 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:07:38.459 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-30 15:07:38.472 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:07:38.483 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:07:38.494 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-30 15:07:38.534 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-30 15:07:38.552 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Update (LibraryManagementSystem.API) in 2101.418ms
2025-09-30 15:07:38.561 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Update (LibraryManagementSystem.API)'
2025-09-30 15:07:38.568 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:07:38.582 +03:00 [INF] Generating expiration headers.
2025-09-30 15:07:38.588 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:08:38 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:07:38.600 +03:00 [INF] Generating Validation headers.
2025-09-30 15:07:38.670 +03:00 [INF] Validation headers generated. ETag: Strong, "248F0B145D74A5D7C74283CC2BE54ADE". Last-Modified: Tue, 30 Sep 2025 12:07:38 GMT
2025-09-30 15:07:38.678 +03:00 [INF] Generating Vary header.
2025-09-30 15:07:38.684 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:07:38.722 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 204 null null 2780.4311ms
2025-09-30 15:07:48.645 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:07:48.663 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 17.9433ms
2025-09-30 15:07:48.669 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:07:48.697 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:07:48.701 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-30 15:07:48.710 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:07:48.716 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:07:48.721 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:07:48.725 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:07:48.729 +03:00 [INF] Incomming Request: GET /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 15:07:48.734 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 15:07:48.749 +03:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:07:48.764 +03:00 [INF] Executing an action GetById on controller Users.
2025-09-30 15:07:48.887 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [AspNetUsers] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-30 15:07:48.948 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 15:07:48.972 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.UserDtos.UserProfileDto'.
2025-09-30 15:07:48.989 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API) in 234.511ms
2025-09-30 15:07:48.995 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 15:07:48.998 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:07:49.001 +03:00 [INF] Generating expiration headers.
2025-09-30 15:07:49.004 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:08:49 GMT. Cache-Control: public,max-age=60.
2025-09-30 15:07:49.006 +03:00 [INF] Generating Validation headers.
2025-09-30 15:07:49.011 +03:00 [INF] Validation headers generated. ETag: Strong, "8499C67ED794675F545FFA9AEAEA5CF2". Last-Modified: Tue, 30 Sep 2025 12:07:49 GMT
2025-09-30 15:07:49.014 +03:00 [INF] Generating Vary header.
2025-09-30 15:07:49.017 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:07:49.021 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 200 null application/json; charset=utf-8 352.7517ms
2025-09-30 15:09:43.226 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:09:43.248 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 23.5411ms
2025-09-30 15:09:43.251 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - application/json 120
2025-09-30 15:09:43.287 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:09:43.290 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:09:43.293 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:09:43.297 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:09:43.300 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:09:43.304 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:09:43.308 +03:00 [INF] Incomming Request: DELETE /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 15:09:43.313 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:09:43.331 +03:00 [INF] Route matched with {action = "Delete", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:09:43.375 +03:00 [INF] Executing an action Delete on controller Users.
2025-09-30 15:09:43.391 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:09:43.663 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[FirstName], [s].[LastName], [s].[Id0], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PersonId], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[RefreshToken], [s].[RefreshTokenExpiryTime], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName], [s].[Id1], [s].[PersonId0], [s].[Id2], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate], [s].[Biography], [s].[PersonId1]
FROM (
    SELECT TOP(2) [p].[Id], [p].[FirstName], [p].[LastName], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id] AS [Id1], [b].[PersonId] AS [PersonId0], [a0].[Id] AS [Id2], [a0].[Biography], [a0].[PersonId] AS [PersonId1]
    FROM [Persons] AS [p]
    LEFT JOIN [AspNetUsers] AS [a] ON [p].[Id] = [a].[PersonId]
    LEFT JOIN [Borrowers] AS [b] ON [p].[Id] = [b].[PersonId]
    LEFT JOIN [Authors] AS [a0] ON [p].[Id] = [a0].[PersonId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [Borrowings] AS [b0] ON [s].[Id1] = [b0].[BorrowerId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2]
2025-09-30 15:09:43.766 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [AspNetUsers]
OUTPUT 1
WHERE [Id] = @p0 AND [ConcurrencyStamp] = @p1;
2025-09-30 15:09:43.837 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Persons]
OUTPUT 1
WHERE [Id] = @p0;
2025-09-30 15:09:43.904 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [AspNetUsers]
OUTPUT 1
WHERE [Id] = @p0 AND [ConcurrencyStamp] = @p1;
2025-09-30 15:09:43.950 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2025-09-30 15:09:43.962 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API) in 622.5627ms
2025-09-30 15:09:43.969 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:09:43.973 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:09:43.977 +03:00 [INF] Generating expiration headers.
2025-09-30 15:09:43.980 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:10:43 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:09:43.985 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 15:09:43.988 +03:00 [INF] Generating Vary header.
2025-09-30 15:09:43.991 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:09:43.996 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 400 null application/json; charset=utf-8 744.3929ms
2025-09-30 15:10:11.263 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - null null
2025-09-30 15:10:11.274 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 10.8449ms
2025-09-30 15:10:11.280 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - null null
2025-09-30 15:10:11.312 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:10:11.315 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:10:11.318 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:10:11.322 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:10:11.325 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:10:11.329 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:10:11.334 +03:00 [INF] Incomming Request: DELETE /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 15:10:11.339 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:10:11.345 +03:00 [INF] Route matched with {action = "Delete", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:10:11.354 +03:00 [INF] Executing an action Delete on controller Users.
2025-09-30 15:10:11.362 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:10:18.278 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API) in 6925.3643ms
2025-09-30 15:10:18.288 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:10:22.978 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id 679cc3f0-ca17-421a-b671-7eb5722d1bd4 not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 163
   at LibraryManagementSystem.Business.Services.UserService.DeleteUserAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 117
   at LibraryManagementSystem.API.Controllers.UsersController.Delete(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:10:23.083 +03:00 [WRN] A Not Found exception has occured: User with id 679cc3f0-ca17-421a-b671-7eb5722d1bd4 not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id 679cc3f0-ca17-421a-b671-7eb5722d1bd4 not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 163
   at LibraryManagementSystem.Business.Services.UserService.DeleteUserAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 117
   at LibraryManagementSystem.API.Controllers.UsersController.Delete(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:10:23.179 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 404 null application/problem+json 11899.5281ms
2025-09-30 15:10:41.213 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - null null
2025-09-30 15:10:41.227 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 307 0 null 13.9473ms
2025-09-30 15:10:41.230 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - null null
2025-09-30 15:10:41.259 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:10:41.263 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-30 15:10:41.268 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:10:41.271 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:10:41.275 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:10:41.279 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:10:41.283 +03:00 [INF] Incomming Request: GET /api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4
2025-09-30 15:10:41.290 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 15:10:41.297 +03:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:10:41.309 +03:00 [INF] Executing an action GetById on controller Users.
2025-09-30 15:10:41.320 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [AspNetUsers] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-30 15:10:44.486 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API) in 3178.4778ms
2025-09-30 15:10:44.493 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 15:10:47.459 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id 679cc3f0-ca17-421a-b671-7eb5722d1bd4 not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 163
   at LibraryManagementSystem.Business.Services.UserService.GetUserProfileAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 47
   at LibraryManagementSystem.API.Controllers.UsersController.GetById(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:10:47.547 +03:00 [WRN] A Not Found exception has occured: User with id 679cc3f0-ca17-421a-b671-7eb5722d1bd4 not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id 679cc3f0-ca17-421a-b671-7eb5722d1bd4 not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 163
   at LibraryManagementSystem.Business.Services.UserService.GetUserProfileAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 47
   at LibraryManagementSystem.API.Controllers.UsersController.GetById(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:10:47.584 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users/679cc3f0-ca17-421a-b671-7eb5722d1bd4 - 404 null application/problem+json 6353.8447ms
2025-09-30 15:12:08.922 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - null null
2025-09-30 15:12:08.943 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - 307 0 null 23.0336ms
2025-09-30 15:12:08.946 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - null null
2025-09-30 15:12:08.965 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:12:08.967 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-30 15:12:08.972 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:12:08.975 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:12:08.978 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:12:08.981 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:12:08.985 +03:00 [INF] Incomming Request: GET /api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1
2025-09-30 15:12:08.990 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 15:12:08.998 +03:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:12:09.013 +03:00 [INF] Executing an action GetById on controller Users.
2025-09-30 15:12:09.022 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [AspNetUsers] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-30 15:12:09.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 15:12:09.049 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.UserDtos.UserProfileDto'.
2025-09-30 15:12:09.057 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API) in 45.0776ms
2025-09-30 15:12:09.062 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 15:12:09.067 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:12:09.070 +03:00 [INF] Generating expiration headers.
2025-09-30 15:12:09.073 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:13:09 GMT. Cache-Control: public,max-age=60.
2025-09-30 15:12:09.077 +03:00 [INF] Generating Validation headers.
2025-09-30 15:12:09.080 +03:00 [INF] Validation headers generated. ETag: Strong, "A4355DCB6986AACCA559D7566CB4BCD8". Last-Modified: Tue, 30 Sep 2025 12:12:09 GMT
2025-09-30 15:12:09.084 +03:00 [INF] Generating Vary header.
2025-09-30 15:12:09.088 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:12:09.092 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - 200 null application/json; charset=utf-8 146.2222ms
2025-09-30 15:12:22.163 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - null null
2025-09-30 15:12:22.178 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - 307 0 null 15.0105ms
2025-09-30 15:12:22.182 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - null null
2025-09-30 15:12:22.213 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:12:22.218 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:12:22.223 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:12:22.227 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:12:22.234 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:12:22.239 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:12:22.243 +03:00 [INF] Incomming Request: DELETE /api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1
2025-09-30 15:12:22.249 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:12:22.254 +03:00 [INF] Route matched with {action = "Delete", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:12:22.265 +03:00 [INF] Executing an action Delete on controller Users.
2025-09-30 15:12:22.273 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:12:22.285 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[FirstName], [s].[LastName], [s].[Id0], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PersonId], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[RefreshToken], [s].[RefreshTokenExpiryTime], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName], [s].[Id1], [s].[PersonId0], [s].[Id2], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate], [s].[Biography], [s].[PersonId1]
FROM (
    SELECT TOP(2) [p].[Id], [p].[FirstName], [p].[LastName], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id] AS [Id1], [b].[PersonId] AS [PersonId0], [a0].[Id] AS [Id2], [a0].[Biography], [a0].[PersonId] AS [PersonId1]
    FROM [Persons] AS [p]
    LEFT JOIN [AspNetUsers] AS [a] ON [p].[Id] = [a].[PersonId]
    LEFT JOIN [Borrowers] AS [b] ON [p].[Id] = [b].[PersonId]
    LEFT JOIN [Authors] AS [a0] ON [p].[Id] = [a0].[PersonId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [Borrowings] AS [b0] ON [s].[Id1] = [b0].[BorrowerId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2]
2025-09-30 15:13:20.747 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API) in 58481.5163ms
2025-09-30 15:13:20.756 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:13:25.846 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.ConflictException: Can not delete person with active loans.
   at LibraryManagementSystem.Business.Services.PersonService.DeletePersonAsync(Int32 id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\PersonService.cs:line 114
   at LibraryManagementSystem.Business.Services.UserService.DeleteUserAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 119
   at LibraryManagementSystem.API.Controllers.UsersController.Delete(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:13:25.938 +03:00 [WRN] An Conflict exception has occured: Can not delete person with active loans.
LibraryManagementSystem.Business.Exceptions.ConflictException: Can not delete person with active loans.
   at LibraryManagementSystem.Business.Services.PersonService.DeletePersonAsync(Int32 id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\PersonService.cs:line 114
   at LibraryManagementSystem.Business.Services.UserService.DeleteUserAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 119
   at LibraryManagementSystem.API.Controllers.UsersController.Delete(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:13:26.016 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - 409 null application/problem+json 63834.722ms
2025-09-30 15:17:15.419 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - null null
2025-09-30 15:17:15.432 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - 307 0 null 12.9951ms
2025-09-30 15:17:15.435 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - null null
2025-09-30 15:17:15.450 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:17:15.451 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:17:15.454 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:17:15.455 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:17:15.457 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:17:15.459 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:17:15.462 +03:00 [INF] Incomming Request: DELETE /api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1
2025-09-30 15:17:15.465 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:17:15.470 +03:00 [INF] Route matched with {action = "Delete", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:17:15.477 +03:00 [INF] Executing an action Delete on controller Users.
2025-09-30 15:17:15.501 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:17:15.512 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[FirstName], [s].[LastName], [s].[Id0], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PersonId], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[RefreshToken], [s].[RefreshTokenExpiryTime], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName], [s].[Id1], [s].[PersonId0], [s].[Id2], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate], [s].[Biography], [s].[PersonId1]
FROM (
    SELECT TOP(2) [p].[Id], [p].[FirstName], [p].[LastName], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id] AS [Id1], [b].[PersonId] AS [PersonId0], [a0].[Id] AS [Id2], [a0].[Biography], [a0].[PersonId] AS [PersonId1]
    FROM [Persons] AS [p]
    LEFT JOIN [AspNetUsers] AS [a] ON [p].[Id] = [a].[PersonId]
    LEFT JOIN [Borrowers] AS [b] ON [p].[Id] = [b].[PersonId]
    LEFT JOIN [Authors] AS [a0] ON [p].[Id] = [a0].[PersonId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [Borrowings] AS [b0] ON [s].[Id1] = [b0].[BorrowerId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2]
2025-09-30 15:17:15.560 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [AspNetUsers]
OUTPUT 1
WHERE [Id] = @p0 AND [ConcurrencyStamp] = @p1;
2025-09-30 15:17:15.633 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Borrowings]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [Borrowings]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [Borrowings]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [Borrowings]
OUTPUT 1
WHERE [Id] = @p3;
DELETE FROM [Borrowings]
OUTPUT 1
WHERE [Id] = @p4;
DELETE FROM [Borrowers]
OUTPUT 1
WHERE [Id] = @p5;
DELETE FROM [Persons]
OUTPUT 1
WHERE [Id] = @p6;
2025-09-30 15:17:15.676 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [AspNetUsers]
OUTPUT 1
WHERE [Id] = @p0 AND [ConcurrencyStamp] = @p1;
2025-09-30 15:17:15.689 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2025-09-30 15:17:15.693 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API) in 216.9013ms
2025-09-30 15:17:15.697 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:17:15.701 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:17:15.705 +03:00 [INF] Generating expiration headers.
2025-09-30 15:17:15.708 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:18:15 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:17:15.710 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 15:17:15.713 +03:00 [INF] Generating Vary header.
2025-09-30 15:17:15.715 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:17:15.719 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - 400 null application/json; charset=utf-8 284.4618ms
2025-09-30 15:17:29.082 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - null null
2025-09-30 15:17:29.092 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - 307 0 null 10.6614ms
2025-09-30 15:17:29.095 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - null null
2025-09-30 15:17:29.118 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:17:29.121 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:17:29.124 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:17:29.129 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:17:29.132 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:17:29.135 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:17:29.138 +03:00 [INF] Incomming Request: DELETE /api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1
2025-09-30 15:17:29.142 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:17:29.147 +03:00 [INF] Route matched with {action = "Delete", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:17:29.156 +03:00 [INF] Executing an action Delete on controller Users.
2025-09-30 15:17:29.163 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:17:38.176 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API) in 9020.7837ms
2025-09-30 15:17:38.187 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:17:41.139 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id aa7c7673-945d-4ba7-870c-54e8bb32a1c1 not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 163
   at LibraryManagementSystem.Business.Services.UserService.DeleteUserAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 117
   at LibraryManagementSystem.API.Controllers.UsersController.Delete(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:17:41.229 +03:00 [WRN] A Not Found exception has occured: User with id aa7c7673-945d-4ba7-870c-54e8bb32a1c1 not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id aa7c7673-945d-4ba7-870c-54e8bb32a1c1 not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 163
   at LibraryManagementSystem.Business.Services.UserService.DeleteUserAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 117
   at LibraryManagementSystem.API.Controllers.UsersController.Delete(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:17:41.303 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - 404 null application/problem+json 12207.3311ms
2025-09-30 15:18:33.102 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - application/json 153
2025-09-30 15:18:33.137 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - 307 0 null 37.8207ms
2025-09-30 15:18:33.144 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - application/json 153
2025-09-30 15:18:33.189 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:18:33.198 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:18:33.210 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:18:33.219 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:18:33.230 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:18:33.240 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:18:33.249 +03:00 [INF] Incomming Request: DELETE /api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1
2025-09-30 15:18:33.265 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:18:33.287 +03:00 [INF] Route matched with {action = "Delete", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:18:33.325 +03:00 [INF] Executing an action Delete on controller Users.
2025-09-30 15:18:33.344 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:18:40.387 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API) in 7063.6798ms
2025-09-30 15:18:40.398 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:18:44.930 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id aa7c7673-945d-4ba7-870c-54e8bb32a1c1 not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 163
   at LibraryManagementSystem.Business.Services.UserService.DeleteUserAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 117
   at LibraryManagementSystem.API.Controllers.UsersController.Delete(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:18:45.023 +03:00 [WRN] A Not Found exception has occured: User with id aa7c7673-945d-4ba7-870c-54e8bb32a1c1 not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id aa7c7673-945d-4ba7-870c-54e8bb32a1c1 not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 163
   at LibraryManagementSystem.Business.Services.UserService.DeleteUserAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 117
   at LibraryManagementSystem.API.Controllers.UsersController.Delete(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:18:45.100 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Users/aa7c7673-945d-4ba7-870c-54e8bb32a1c1 - 404 null application/problem+json 11956.5719ms
2025-09-30 15:20:07.953 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users - application/json 153
2025-09-30 15:20:07.973 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users - 307 0 null 19.889ms
2025-09-30 15:20:07.976 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users - application/json 153
2025-09-30 15:20:07.990 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:20:07.992 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:20:07.994 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:20:07.996 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:20:07.998 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:20:08.001 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:20:08.004 +03:00 [INF] Incomming Request: POST /api/Users
2025-09-30 15:20:08.006 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 15:20:08.014 +03:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(LibraryManagementSystem.Business.Dtos.UserDtos.CreateUserByAdminDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:20:08.028 +03:00 [INF] Executing an action Create on controller Users.
2025-09-30 15:20:08.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:20:08.052 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:20:08.073 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:20:08.084 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:20:08.132 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Persons] ([FirstName], [LastName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-09-30 15:20:08.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (Size = 450), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PersonId], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-30 15:20:08.189 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 15:20:08.216 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-30 15:20:08.230 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 15:20:08.256 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:20:08.266 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:20:08.288 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p19='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p20='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PersonId] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [RefreshToken] = @p14, [RefreshTokenExpiryTime] = @p15, [SecurityStamp] = @p16, [TwoFactorEnabled] = @p17, [UserName] = @p18
OUTPUT 1
WHERE [Id] = @p19 AND [ConcurrencyStamp] = @p20;
2025-09-30 15:20:08.303 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 15:20:08.312 +03:00 [INF] Executing ObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.UserDtos.UserProfileDto'.
2025-09-30 15:20:08.317 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API) in 296.5853ms
2025-09-30 15:20:08.321 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 15:20:08.325 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:20:08.328 +03:00 [INF] Generating expiration headers.
2025-09-30 15:20:08.330 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:21:08 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:20:08.333 +03:00 [INF] Generating Validation headers.
2025-09-30 15:20:08.336 +03:00 [INF] Validation headers generated. ETag: Strong, "BD50D510BD6686AD223CEDEBFD53E026". Last-Modified: Tue, 30 Sep 2025 12:20:08 GMT
2025-09-30 15:20:08.339 +03:00 [INF] Generating Vary header.
2025-09-30 15:20:08.341 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:20:08.345 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users - 201 null application/json; charset=utf-8 368.8285ms
2025-09-30 15:20:28.219 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Users/df97cbad-41aa-405c-ad60-4019566b668a - application/json 153
2025-09-30 15:20:28.230 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Users/df97cbad-41aa-405c-ad60-4019566b668a - 307 0 null 11.4254ms
2025-09-30 15:20:28.232 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Users/df97cbad-41aa-405c-ad60-4019566b668a - application/json 153
2025-09-30 15:20:28.259 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:20:28.266 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:20:28.270 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:20:28.274 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:20:28.279 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:20:28.288 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:20:28.295 +03:00 [INF] Incomming Request: DELETE /api/Users/df97cbad-41aa-405c-ad60-4019566b668a
2025-09-30 15:20:28.305 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:20:28.316 +03:00 [INF] Route matched with {action = "Delete", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:20:28.327 +03:00 [INF] Executing an action Delete on controller Users.
2025-09-30 15:20:28.340 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:20:28.357 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[FirstName], [s].[LastName], [s].[Id0], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PersonId], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[RefreshToken], [s].[RefreshTokenExpiryTime], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName], [s].[Id1], [s].[PersonId0], [s].[Id2], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate], [s].[Biography], [s].[PersonId1]
FROM (
    SELECT TOP(2) [p].[Id], [p].[FirstName], [p].[LastName], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id] AS [Id1], [b].[PersonId] AS [PersonId0], [a0].[Id] AS [Id2], [a0].[Biography], [a0].[PersonId] AS [PersonId1]
    FROM [Persons] AS [p]
    LEFT JOIN [AspNetUsers] AS [a] ON [p].[Id] = [a].[PersonId]
    LEFT JOIN [Borrowers] AS [b] ON [p].[Id] = [b].[PersonId]
    LEFT JOIN [Authors] AS [a0] ON [p].[Id] = [a0].[PersonId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [Borrowings] AS [b0] ON [s].[Id1] = [b0].[BorrowerId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2]
2025-09-30 15:20:28.380 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [AspNetUsers]
OUTPUT 1
WHERE [Id] = @p0 AND [ConcurrencyStamp] = @p1;
2025-09-30 15:20:28.395 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Persons]
OUTPUT 1
WHERE [Id] = @p0;
2025-09-30 15:20:28.405 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [AspNetUsers]
OUTPUT 1
WHERE [Id] = @p0 AND [ConcurrencyStamp] = @p1;
2025-09-30 15:20:28.415 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2025-09-30 15:20:28.419 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API) in 92.4511ms
2025-09-30 15:20:28.424 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:20:28.429 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:20:28.432 +03:00 [INF] Generating expiration headers.
2025-09-30 15:20:28.435 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:21:28 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:20:28.437 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 15:20:28.439 +03:00 [INF] Generating Vary header.
2025-09-30 15:20:28.441 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:20:28.444 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Users/df97cbad-41aa-405c-ad60-4019566b668a - 400 null application/json; charset=utf-8 211.8727ms
2025-09-30 15:20:36.057 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users/df97cbad-41aa-405c-ad60-4019566b668a - application/json 153
2025-09-30 15:20:36.068 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users/df97cbad-41aa-405c-ad60-4019566b668a - 307 0 null 11.0814ms
2025-09-30 15:20:36.074 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users/df97cbad-41aa-405c-ad60-4019566b668a - application/json 153
2025-09-30 15:20:36.095 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:20:36.098 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-30 15:20:36.100 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:20:36.102 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:20:36.105 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:20:36.107 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:20:36.109 +03:00 [INF] Incomming Request: GET /api/Users/df97cbad-41aa-405c-ad60-4019566b668a
2025-09-30 15:20:36.112 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 15:20:36.115 +03:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:20:36.120 +03:00 [INF] Executing an action GetById on controller Users.
2025-09-30 15:20:36.125 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [AspNetUsers] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-30 15:20:38.951 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API) in 2831.1102ms
2025-09-30 15:20:38.974 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 15:20:41.608 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id df97cbad-41aa-405c-ad60-4019566b668a not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 163
   at LibraryManagementSystem.Business.Services.UserService.GetUserProfileAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 47
   at LibraryManagementSystem.API.Controllers.UsersController.GetById(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:20:41.722 +03:00 [WRN] A Not Found exception has occured: User with id df97cbad-41aa-405c-ad60-4019566b668a not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id df97cbad-41aa-405c-ad60-4019566b668a not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 163
   at LibraryManagementSystem.Business.Services.UserService.GetUserProfileAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 47
   at LibraryManagementSystem.API.Controllers.UsersController.GetById(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 15:20:41.756 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users/df97cbad-41aa-405c-ad60-4019566b668a - 404 null application/problem+json 5682.4261ms
2025-09-30 15:21:57.177 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users - application/json 153
2025-09-30 15:21:57.197 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users - 307 0 null 21.2769ms
2025-09-30 15:21:57.200 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users - application/json 153
2025-09-30 15:21:57.219 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:21:57.223 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:21:57.226 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:21:57.230 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:21:57.236 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:21:57.240 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:21:57.245 +03:00 [INF] Incomming Request: POST /api/Users
2025-09-30 15:21:57.250 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 15:21:57.260 +03:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(LibraryManagementSystem.Business.Dtos.UserDtos.CreateUserByAdminDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:21:57.274 +03:00 [INF] Executing an action Create on controller Users.
2025-09-30 15:21:57.284 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:21:57.307 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 15:21:57.322 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:21:57.347 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:21:57.369 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Persons] ([FirstName], [LastName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-09-30 15:21:57.380 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (Size = 450), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PersonId], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-30 15:21:57.391 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 15:21:57.401 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-30 15:21:57.410 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 15:21:57.419 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 15:21:57.430 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:21:57.441 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p19='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p20='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PersonId] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [RefreshToken] = @p14, [RefreshTokenExpiryTime] = @p15, [SecurityStamp] = @p16, [TwoFactorEnabled] = @p17, [UserName] = @p18
OUTPUT 1
WHERE [Id] = @p19 AND [ConcurrencyStamp] = @p20;
2025-09-30 15:21:57.457 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 15:21:57.464 +03:00 [INF] Executing ObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.UserDtos.UserProfileDto'.
2025-09-30 15:21:57.469 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API) in 196.0692ms
2025-09-30 15:21:57.474 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 15:21:57.478 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:21:57.480 +03:00 [INF] Generating expiration headers.
2025-09-30 15:21:57.483 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:22:57 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:21:57.486 +03:00 [INF] Generating Validation headers.
2025-09-30 15:21:57.489 +03:00 [INF] Validation headers generated. ETag: Strong, "A2430E6FC9AC107454D76E85797D1A2A". Last-Modified: Tue, 30 Sep 2025 12:21:57 GMT
2025-09-30 15:21:57.492 +03:00 [INF] Generating Vary header.
2025-09-30 15:21:57.495 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:21:57.498 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users - 201 null application/json; charset=utf-8 297.8998ms
2025-09-30 15:23:24.624 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users//df97cbad-41aa-405c-ad60-4019566b668a - application/json 153
2025-09-30 15:23:24.642 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users//df97cbad-41aa-405c-ad60-4019566b668a - 307 0 null 18.2319ms
2025-09-30 15:23:24.645 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users//df97cbad-41aa-405c-ad60-4019566b668a - application/json 153
2025-09-30 15:23:24.663 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:23:24.665 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-30 15:23:24.666 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:23:24.668 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:23:24.670 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:23:24.672 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:23:24.675 +03:00 [INF] Incomming Request: GET /api/Users//df97cbad-41aa-405c-ad60-4019566b668a
2025-09-30 15:23:24.682 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:23:24.685 +03:00 [INF] Generating expiration headers.
2025-09-30 15:23:24.689 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:24:24 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:23:24.692 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 15:23:24.695 +03:00 [INF] Generating Vary header.
2025-09-30 15:23:24.698 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:23:24.702 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users//df97cbad-41aa-405c-ad60-4019566b668a - 404 null application/problem+json 57.1993ms
2025-09-30 15:23:24.714 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7266/api/Users//df97cbad-41aa-405c-ad60-4019566b668a, Response status code: 404
2025-09-30 15:23:49.015 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users - application/json 153
2025-09-30 15:23:49.027 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users - 307 0 null 12.0964ms
2025-09-30 15:23:49.036 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users - application/json 153
2025-09-30 15:23:49.041 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:23:49.043 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:23:49.044 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:23:49.046 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:23:49.048 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:23:49.051 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:23:49.053 +03:00 [INF] Incomming Request: POST /api/Users
2025-09-30 15:23:49.055 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 15:23:49.058 +03:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(LibraryManagementSystem.Business.Dtos.UserDtos.CreateUserByAdminDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:23:49.065 +03:00 [INF] Executing an action Create on controller Users.
2025-09-30 15:23:49.071 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:23:49.089 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2025-09-30 15:23:49.094 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API) in 28.9926ms
2025-09-30 15:23:49.097 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 15:23:49.101 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:23:49.104 +03:00 [INF] Generating expiration headers.
2025-09-30 15:23:49.107 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:24:49 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:23:49.111 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 15:23:49.113 +03:00 [INF] Generating Vary header.
2025-09-30 15:23:49.116 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:23:49.120 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users - 400 null application/json; charset=utf-8 83.8844ms
2025-09-30 15:24:15.991 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users - application/json 153
2025-09-30 15:24:16.012 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users - 307 0 null 21.4754ms
2025-09-30 15:24:16.020 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users - application/json 153
2025-09-30 15:24:16.057 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:24:16.059 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:24:16.062 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:24:16.065 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:24:16.068 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:24:16.070 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:24:16.073 +03:00 [INF] Incomming Request: POST /api/Users
2025-09-30 15:24:16.077 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 15:24:16.082 +03:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(LibraryManagementSystem.Business.Dtos.UserDtos.CreateUserByAdminDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:24:16.088 +03:00 [INF] Executing an action Create on controller Users.
2025-09-30 15:24:16.095 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 15:24:16.104 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2025-09-30 15:24:16.109 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API) in 21.2339ms
2025-09-30 15:24:16.114 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 15:24:16.118 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:24:16.120 +03:00 [INF] Generating expiration headers.
2025-09-30 15:24:16.123 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:25:16 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:24:16.127 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 15:24:16.130 +03:00 [INF] Generating Vary header.
2025-09-30 15:24:16.132 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:24:16.137 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users - 400 null application/json; charset=utf-8 117.1163ms
2025-09-30 15:25:31.033 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Users//df97cbad-41aa-405c-ad60-4019566b668a - application/json 153
2025-09-30 15:25:31.053 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Users//df97cbad-41aa-405c-ad60-4019566b668a - 307 0 null 21.5558ms
2025-09-30 15:25:31.056 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Users//df97cbad-41aa-405c-ad60-4019566b668a - application/json 153
2025-09-30 15:25:31.071 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:25:31.073 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:25:31.075 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:25:31.078 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:25:31.080 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:25:31.083 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:25:31.086 +03:00 [INF] Incomming Request: DELETE /api/Users//df97cbad-41aa-405c-ad60-4019566b668a
2025-09-30 15:25:31.090 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 15:25:31.092 +03:00 [INF] Generating expiration headers.
2025-09-30 15:25:31.095 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 12:26:31 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 15:25:31.098 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 15:25:31.101 +03:00 [INF] Generating Vary header.
2025-09-30 15:25:31.103 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 15:25:31.107 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Users//df97cbad-41aa-405c-ad60-4019566b668a - 404 null application/problem+json 50.7703ms
2025-09-30 15:25:31.117 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: DELETE https://localhost:7266/api/Users//df97cbad-41aa-405c-ad60-4019566b668a, Response status code: 404
2025-09-30 15:26:01.848 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Users/7c307754-622e-48d1-96d6-edd3bf9eba44 - application/json 153
2025-09-30 15:26:01.876 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Users/7c307754-622e-48d1-96d6-edd3bf9eba44 - 307 0 null 27.9974ms
2025-09-30 15:26:01.884 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Users/7c307754-622e-48d1-96d6-edd3bf9eba44 - application/json 153
2025-09-30 15:26:01.932 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 15:26:01.937 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 15:26:01.944 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 15:26:01.950 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 15:26:01.954 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 15:26:01.961 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 15:26:01.967 +03:00 [INF] Incomming Request: DELETE /api/Users/7c307754-622e-48d1-96d6-edd3bf9eba44
2025-09-30 15:26:01.974 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 15:26:01.980 +03:00 [INF] Route matched with {action = "Delete", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 15:26:01.992 +03:00 [INF] Executing an action Delete on controller Users.
2025-09-30 15:26:18.877 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 15:26:35.900 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[FirstName], [s].[LastName], [s].[Id0], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PersonId], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[RefreshToken], [s].[RefreshTokenExpiryTime], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName], [s].[Id1], [s].[PersonId0], [s].[Id2], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate], [s].[Biography], [s].[PersonId1]
FROM (
    SELECT TOP(2) [p].[Id], [p].[FirstName], [p].[LastName], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id] AS [Id1], [b].[PersonId] AS [PersonId0], [a0].[Id] AS [Id2], [a0].[Biography], [a0].[PersonId] AS [PersonId1]
    FROM [Persons] AS [p]
    LEFT JOIN [AspNetUsers] AS [a] ON [p].[Id] = [a].[PersonId]
    LEFT JOIN [Borrowers] AS [b] ON [p].[Id] = [b].[PersonId]
    LEFT JOIN [Authors] AS [a0] ON [p].[Id] = [a0].[PersonId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [Borrowings] AS [b0] ON [s].[Id1] = [b0].[BorrowerId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2]
2025-09-30 15:27:01.305 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [AspNetUsers]
OUTPUT 1
WHERE [Id] = @p0 AND [ConcurrencyStamp] = @p1;
2025-09-30 15:27:14.241 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Persons]
OUTPUT 1
WHERE [Id] = @p0;
2025-09-30 18:21:39.252 +03:00 [INF] Starting database seeding.
2025-09-30 18:21:39.774 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 18:21:42.180 +03:00 [INF] Executed DbCommand (117ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:21:42.290 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:21:42.296 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:21:42.314 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:21:42.362 +03:00 [INF] Database seeding finished successfully.
2025-09-30 18:21:42.971 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-30 18:21:42.976 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-30 18:21:43.236 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 18:21:43.241 +03:00 [INF] Hosting environment: Development
2025-09-30 18:21:43.245 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-30 18:21:52.950 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users - application/json 153
2025-09-30 18:21:53.182 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users - 307 0 null 270.0378ms
2025-09-30 18:21:53.285 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users - application/json 153
2025-09-30 18:21:53.674 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/30/2025 12:59:12 PM', Current time (UTC): '9/30/2025 3:21:53 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-30 18:21:53.730 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/30/2025 12:59:12 PM', Current time (UTC): '9/30/2025 3:21:53 PM'.
2025-09-30 18:21:53.761 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-30 18:21:53.803 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-30 18:21:53.824 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users - 401 0 null 539.4749ms
2025-09-30 18:22:18.052 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Token/Refresh - application/json 505
2025-09-30 18:22:18.063 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Token/Refresh - 307 0 null 10.9138ms
2025-09-30 18:22:18.081 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Token/Refresh - application/json 505
2025-09-30 18:22:18.118 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:22:18.120 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 18:22:18.123 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:22:18.129 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:22:18.131 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:22:18.134 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:22:18.145 +03:00 [INF] Incomming Request: POST /api/Token/Refresh
2025-09-30 18:22:18.151 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.TokenController.Refresh (LibraryManagementSystem.API)'
2025-09-30 18:22:18.208 +03:00 [INF] Route matched with {action = "Refresh", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(LibraryManagementSystem.Business.Dtos.AccountDtos.TokenDto) on controller LibraryManagementSystem.API.Controllers.TokenController (LibraryManagementSystem.API).
2025-09-30 18:22:18.599 +03:00 [INF] Executing an action Refresh on controller Token.
2025-09-30 18:22:18.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 18:22:18.992 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 18:22:19.077 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 18:22:19.104 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:22:19.368 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-30 18:22:19.416 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.AccountDtos.TokenDto'.
2025-09-30 18:22:19.434 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.TokenController.Refresh (LibraryManagementSystem.API) in 1211.6232ms
2025-09-30 18:22:19.440 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.TokenController.Refresh (LibraryManagementSystem.API)'
2025-09-30 18:22:19.444 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:22:19.451 +03:00 [INF] Generating expiration headers.
2025-09-30 18:22:19.456 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:23:19 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 18:22:19.463 +03:00 [INF] Generating Validation headers.
2025-09-30 18:22:19.500 +03:00 [INF] Validation headers generated. ETag: Strong, "55F225A417CD5850AE9C714A669A176C". Last-Modified: Tue, 30 Sep 2025 15:22:19 GMT
2025-09-30 18:22:19.505 +03:00 [INF] Generating Vary header.
2025-09-30 18:22:19.513 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:22:19.536 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Token/Refresh - 200 null application/json; charset=utf-8 1455.4747ms
2025-09-30 18:22:38.852 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users - application/json 153
2025-09-30 18:22:38.857 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users - 307 0 null 5.9789ms
2025-09-30 18:22:38.860 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users - application/json 153
2025-09-30 18:22:38.885 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:22:38.887 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 18:22:38.889 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:22:38.891 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:22:38.893 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:22:38.895 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:22:38.897 +03:00 [INF] Incomming Request: POST /api/Users
2025-09-30 18:22:38.900 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 18:22:38.912 +03:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(LibraryManagementSystem.Business.Dtos.UserDtos.CreateUserByAdminDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:22:38.946 +03:00 [INF] Executing an action Create on controller Users.
2025-09-30 18:22:38.998 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:22:39.017 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:22:39.072 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 18:22:39.088 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:22:39.407 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Persons] ([FirstName], [LastName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-09-30 18:22:39.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (Size = 450), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PersonId], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-30 18:22:39.500 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 18:22:39.536 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-30 18:22:39.557 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 18:22:39.628 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 18:22:39.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:22:39.689 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p19='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p20='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PersonId] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [RefreshToken] = @p14, [RefreshTokenExpiryTime] = @p15, [SecurityStamp] = @p16, [TwoFactorEnabled] = @p17, [UserName] = @p18
OUTPUT 1
WHERE [Id] = @p19 AND [ConcurrencyStamp] = @p20;
2025-09-30 18:22:39.723 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 18:22:39.732 +03:00 [INF] Executing ObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.UserDtos.UserProfileDto'.
2025-09-30 18:22:39.752 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API) in 831.8709ms
2025-09-30 18:22:39.758 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 18:22:39.762 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:22:39.766 +03:00 [INF] Generating expiration headers.
2025-09-30 18:22:39.770 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:23:39 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 18:22:39.777 +03:00 [INF] Generating Validation headers.
2025-09-30 18:22:39.781 +03:00 [INF] Validation headers generated. ETag: Strong, "6A41802C07985427C56EC686EF877787". Last-Modified: Tue, 30 Sep 2025 15:22:39 GMT
2025-09-30 18:22:39.789 +03:00 [INF] Generating Vary header.
2025-09-30 18:22:39.792 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:22:39.799 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users - 201 null application/json; charset=utf-8 939.2827ms
2025-09-30 18:22:59.560 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Users/b307ac68-b5b0-49ab-bd23-7604c03c6a4b - application/json 153
2025-09-30 18:22:59.572 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Users/b307ac68-b5b0-49ab-bd23-7604c03c6a4b - 307 0 null 12.7478ms
2025-09-30 18:22:59.575 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Users/b307ac68-b5b0-49ab-bd23-7604c03c6a4b - application/json 153
2025-09-30 18:22:59.605 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:22:59.607 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 18:22:59.610 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:22:59.615 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:22:59.618 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:22:59.624 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:22:59.626 +03:00 [INF] Incomming Request: DELETE /api/Users/b307ac68-b5b0-49ab-bd23-7604c03c6a4b
2025-09-30 18:22:59.633 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 18:22:59.646 +03:00 [INF] Route matched with {action = "Delete", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:22:59.660 +03:00 [INF] Executing an action Delete on controller Users.
2025-09-30 18:22:59.673 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 18:22:59.725 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [AspNetUsers]
OUTPUT 1
WHERE [Id] = @p0 AND [ConcurrencyStamp] = @p1;
2025-09-30 18:22:59.966 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[FirstName], [s].[LastName], [s].[Id0], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PersonId], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[RefreshToken], [s].[RefreshTokenExpiryTime], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName], [s].[Id1], [s].[PersonId0], [s].[Id2], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate], [s].[Biography], [s].[PersonId1]
FROM (
    SELECT TOP(2) [p].[Id], [p].[FirstName], [p].[LastName], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id] AS [Id1], [b].[PersonId] AS [PersonId0], [a0].[Id] AS [Id2], [a0].[Biography], [a0].[PersonId] AS [PersonId1]
    FROM [Persons] AS [p]
    LEFT JOIN [AspNetUsers] AS [a] ON [p].[Id] = [a].[PersonId]
    LEFT JOIN [Borrowers] AS [b] ON [p].[Id] = [b].[PersonId]
    LEFT JOIN [Authors] AS [a0] ON [p].[Id] = [a0].[PersonId]
    WHERE [p].[Id] = @__id_0
) AS [s]
LEFT JOIN [Borrowings] AS [b0] ON [s].[Id1] = [b0].[BorrowerId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2]
2025-09-30 18:23:00.019 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Persons]
OUTPUT 1
WHERE [Id] = @p0;
2025-09-30 18:23:00.039 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-30 18:23:00.043 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API) in 387.0338ms
2025-09-30 18:23:00.049 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Delete (LibraryManagementSystem.API)'
2025-09-30 18:23:00.054 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:23:00.058 +03:00 [INF] Generating expiration headers.
2025-09-30 18:23:00.060 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:24:00 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 18:23:00.063 +03:00 [INF] Generating Validation headers.
2025-09-30 18:23:00.067 +03:00 [INF] Validation headers generated. ETag: Strong, "1423074DA95553A08F189C3356FFCC39". Last-Modified: Tue, 30 Sep 2025 15:23:00 GMT
2025-09-30 18:23:00.070 +03:00 [INF] Generating Vary header.
2025-09-30 18:23:00.074 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:23:00.078 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Users/b307ac68-b5b0-49ab-bd23-7604c03c6a4b - 204 null null 502.8396ms
2025-09-30 18:23:07.274 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users/b307ac68-b5b0-49ab-bd23-7604c03c6a4b - application/json 153
2025-09-30 18:23:07.290 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users/b307ac68-b5b0-49ab-bd23-7604c03c6a4b - 307 0 null 15.7018ms
2025-09-30 18:23:07.293 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users/b307ac68-b5b0-49ab-bd23-7604c03c6a4b - application/json 153
2025-09-30 18:23:07.324 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:23:07.333 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-30 18:23:07.336 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:23:07.340 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:23:07.344 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:23:07.347 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:23:07.351 +03:00 [INF] Incomming Request: GET /api/Users/b307ac68-b5b0-49ab-bd23-7604c03c6a4b
2025-09-30 18:23:07.355 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 18:23:07.371 +03:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:23:07.413 +03:00 [INF] Executing an action GetById on controller Users.
2025-09-30 18:23:07.449 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [AspNetUsers] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-30 18:23:12.648 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API) in 5268.3603ms
2025-09-30 18:23:12.656 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 18:23:19.548 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id b307ac68-b5b0-49ab-bd23-7604c03c6a4b not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 164
   at LibraryManagementSystem.Business.Services.UserService.GetUserProfileAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 47
   at LibraryManagementSystem.API.Controllers.UsersController.GetById(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 18:23:19.679 +03:00 [WRN] A Not Found exception has occured: User with id b307ac68-b5b0-49ab-bd23-7604c03c6a4b not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: User with id b307ac68-b5b0-49ab-bd23-7604c03c6a4b not found.
   at LibraryManagementSystem.Business.Services.UserService.ThrowNotFoundExceptionIfUserNotExist(String id, User user) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 164
   at LibraryManagementSystem.Business.Services.UserService.GetUserProfileAsync(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\UserService.cs:line 47
   at LibraryManagementSystem.API.Controllers.UsersController.GetById(String id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\UsersController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-30 18:23:19.867 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users/b307ac68-b5b0-49ab-bd23-7604c03c6a4b - 404 null application/problem+json 12573.8561ms
2025-09-30 18:27:12.633 +03:00 [INF] Starting database seeding.
2025-09-30 18:27:13.182 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 18:27:16.257 +03:00 [INF] Executed DbCommand (106ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:27:16.342 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:27:16.348 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:27:16.367 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:27:16.429 +03:00 [INF] Database seeding finished successfully.
2025-09-30 18:27:17.259 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-30 18:27:17.265 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-30 18:27:17.448 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 18:27:17.453 +03:00 [INF] Hosting environment: Development
2025-09-30 18:27:17.457 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-30 18:27:28.944 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users - application/json 153
2025-09-30 18:27:29.074 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users - 307 0 null 142.6755ms
2025-09-30 18:27:29.175 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users - application/json 153
2025-09-30 18:27:29.577 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:27:29.585 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 18:27:29.593 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:27:29.614 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:27:29.621 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:27:29.629 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:27:29.648 +03:00 [INF] Incomming Request: POST /api/Users
2025-09-30 18:27:29.657 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 18:27:29.732 +03:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(LibraryManagementSystem.Business.Dtos.UserDtos.CreateUserByAdminDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:27:30.488 +03:00 [INF] Executing an action Create on controller Users.
2025-09-30 18:27:30.760 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:27:30.801 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:27:30.945 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 18:27:30.984 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:27:31.804 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Persons] ([FirstName], [LastName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-09-30 18:27:31.899 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (Size = 450), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PersonId], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-09-30 18:27:32.073 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 18:27:32.254 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-30 18:27:32.294 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 18:27:32.358 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 18:27:32.416 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:27:32.522 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p19='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p20='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PersonId] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [RefreshToken] = @p14, [RefreshTokenExpiryTime] = @p15, [SecurityStamp] = @p16, [TwoFactorEnabled] = @p17, [UserName] = @p18
OUTPUT 1
WHERE [Id] = @p19 AND [ConcurrencyStamp] = @p20;
2025-09-30 18:27:32.751 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 18:27:32.820 +03:00 [INF] Executing ObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.UserDtos.UserProfileDto'.
2025-09-30 18:27:32.878 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API) in 3111.8729ms
2025-09-30 18:27:32.890 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.Create (LibraryManagementSystem.API)'
2025-09-30 18:27:32.901 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:27:32.915 +03:00 [INF] Generating expiration headers.
2025-09-30 18:27:32.925 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:28:32 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 18:27:32.938 +03:00 [INF] Generating Validation headers.
2025-09-30 18:27:32.991 +03:00 [INF] Validation headers generated. ETag: Strong, "5A498FB8238D74128BE18557F9FEB6CF". Last-Modified: Tue, 30 Sep 2025 15:27:32 GMT
2025-09-30 18:27:33.001 +03:00 [INF] Generating Vary header.
2025-09-30 18:27:33.006 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:27:33.039 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users - 201 null application/json; charset=utf-8 3863.735ms
2025-09-30 18:28:58.995 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Remove - application/json 73
2025-09-30 18:28:59.016 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Remove - 307 0 null 20.5277ms
2025-09-30 18:28:59.022 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Remove - application/json 73
2025-09-30 18:28:59.043 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:28:59.045 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 18:28:59.051 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:28:59.055 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:28:59.060 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:28:59.065 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:28:59.073 +03:00 [INF] Incomming Request: POST /api/Users/Roles/Remove
2025-09-30 18:28:59.077 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API)'
2025-09-30 18:28:59.097 +03:00 [INF] Route matched with {action = "RemoveRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RemoveRole(LibraryManagementSystem.Business.Dtos.UserDtos.AssignRoleDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:28:59.128 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-30 18:28:59.188 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API) in 75.8584ms
2025-09-30 18:28:59.194 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API)'
2025-09-30 18:28:59.201 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:28:59.205 +03:00 [INF] Generating expiration headers.
2025-09-30 18:28:59.209 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:29:59 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 18:28:59.214 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 18:28:59.218 +03:00 [INF] Generating Vary header.
2025-09-30 18:28:59.223 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:28:59.227 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Remove - 400 null application/problem+json; charset=utf-8 205.1529ms
2025-09-30 18:30:29.620 +03:00 [INF] Starting database seeding.
2025-09-30 18:30:30.436 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 18:30:33.397 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:30:33.532 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:30:33.539 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:30:33.560 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:30:33.641 +03:00 [INF] Database seeding finished successfully.
2025-09-30 18:30:34.416 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-30 18:30:34.422 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-30 18:30:34.721 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 18:30:34.725 +03:00 [INF] Hosting environment: Development
2025-09-30 18:30:34.730 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-30 18:30:35.601 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Remove - application/json 73
2025-09-30 18:30:35.793 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Remove - 307 0 null 200.714ms
2025-09-30 18:30:35.864 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Remove - application/json 73
2025-09-30 18:30:36.090 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:30:36.093 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 18:30:36.096 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:30:36.101 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:30:36.103 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:30:36.105 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:30:36.114 +03:00 [INF] Incomming Request: POST /api/Users/Roles/Remove
2025-09-30 18:30:36.117 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API)'
2025-09-30 18:30:36.159 +03:00 [INF] Route matched with {action = "RemoveRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RemoveRole(LibraryManagementSystem.Business.Dtos.UserDtos.AssignRoleDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:30:36.489 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-30 18:30:36.547 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API) in 376.608ms
2025-09-30 18:30:36.552 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API)'
2025-09-30 18:30:36.556 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:30:36.563 +03:00 [INF] Generating expiration headers.
2025-09-30 18:30:36.567 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:31:36 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 18:30:36.573 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 18:30:36.576 +03:00 [INF] Generating Vary header.
2025-09-30 18:30:36.578 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:30:36.585 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Remove - 400 null application/problem+json; charset=utf-8 721.3008ms
2025-09-30 18:30:50.228 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Remove - application/json 78
2025-09-30 18:30:50.241 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Remove - 307 0 null 12.9515ms
2025-09-30 18:30:50.248 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Remove - application/json 78
2025-09-30 18:30:50.271 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:30:50.276 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 18:30:50.284 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:30:50.289 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:30:50.294 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:30:50.300 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:30:50.305 +03:00 [INF] Incomming Request: POST /api/Users/Roles/Remove
2025-09-30 18:30:50.312 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API)'
2025-09-30 18:30:50.322 +03:00 [INF] Route matched with {action = "RemoveRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RemoveRole(LibraryManagementSystem.Business.Dtos.UserDtos.AssignRoleDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:30:50.350 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-30 18:30:50.364 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API) in 25.6893ms
2025-09-30 18:30:50.377 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API)'
2025-09-30 18:30:50.389 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:30:50.392 +03:00 [INF] Generating expiration headers.
2025-09-30 18:30:50.395 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:31:50 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 18:30:50.398 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 18:30:50.402 +03:00 [INF] Generating Vary header.
2025-09-30 18:30:50.405 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:30:50.409 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Remove - 400 null application/problem+json; charset=utf-8 161.2164ms
2025-09-30 18:31:16.358 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Remove - application/json 78
2025-09-30 18:31:16.385 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Remove - 307 0 null 27.1213ms
2025-09-30 18:31:16.394 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Remove - application/json 78
2025-09-30 18:31:16.407 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:31:16.410 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 18:31:16.413 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:31:16.416 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:31:16.419 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:31:16.421 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:31:16.424 +03:00 [INF] Incomming Request: POST /api/Users/Roles/Remove
2025-09-30 18:31:16.428 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API)'
2025-09-30 18:31:16.433 +03:00 [INF] Route matched with {action = "RemoveRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RemoveRole(LibraryManagementSystem.Business.Dtos.UserDtos.AssignRoleDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:31:16.471 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-30 18:31:16.477 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API) in 34.7776ms
2025-09-30 18:31:16.483 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API)'
2025-09-30 18:31:16.488 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:31:16.491 +03:00 [INF] Generating expiration headers.
2025-09-30 18:31:16.497 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:32:16 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 18:31:16.503 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-30 18:31:16.506 +03:00 [INF] Generating Vary header.
2025-09-30 18:31:16.511 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:31:16.516 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Remove - 400 null application/problem+json; charset=utf-8 122.1002ms
2025-09-30 18:32:07.711 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Remove - application/json 82
2025-09-30 18:32:07.733 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Remove - 307 0 null 23.5578ms
2025-09-30 18:32:07.739 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Remove - application/json 82
2025-09-30 18:32:07.771 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:32:07.780 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 18:32:07.788 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:32:07.792 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:32:07.802 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:32:07.808 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:32:07.816 +03:00 [INF] Incomming Request: POST /api/Users/Roles/Remove
2025-09-30 18:32:07.823 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API)'
2025-09-30 18:32:07.831 +03:00 [INF] Route matched with {action = "RemoveRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RemoveRole(LibraryManagementSystem.Business.Dtos.UserDtos.AssignRoleDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:32:07.852 +03:00 [INF] Executing an action RemoveRole on controller Users.
2025-09-30 18:32:08.253 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 18:32:08.301 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:32:08.422 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 18:32:08.550 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-30 18:32:08.589 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 18:32:08.613 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 18:32:08.748 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 18:32:08.804 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:32:09.443 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p19='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p20='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [AspNetUserRoles]
OUTPUT 1
WHERE [RoleId] = @p0 AND [UserId] = @p1;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PersonId] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [RefreshToken] = @p14, [RefreshTokenExpiryTime] = @p15, [SecurityStamp] = @p16, [TwoFactorEnabled] = @p17, [UserName] = @p18
OUTPUT 1
WHERE [Id] = @p19 AND [ConcurrencyStamp] = @p20;
2025-09-30 18:32:09.608 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-09-30 18:32:09.618 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API) in 1769.7605ms
2025-09-30 18:32:09.628 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.RemoveRole (LibraryManagementSystem.API)'
2025-09-30 18:32:09.636 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:32:09.644 +03:00 [INF] Generating expiration headers.
2025-09-30 18:32:09.648 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:33:09 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 18:32:09.659 +03:00 [INF] Generating Validation headers.
2025-09-30 18:32:09.706 +03:00 [INF] Validation headers generated. ETag: Strong, "BB645B1D9186CC5C7FAF0053E1AE9060". Last-Modified: Tue, 30 Sep 2025 15:32:09 GMT
2025-09-30 18:32:09.714 +03:00 [INF] Generating Vary header.
2025-09-30 18:32:09.722 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:32:09.744 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Remove - 200 null text/plain; charset=utf-8 2006.6431ms
2025-09-30 18:32:23.366 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users/df11b04f-7c59-4355-8de3-24a490a36e56 - application/json 82
2025-09-30 18:32:23.382 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users/df11b04f-7c59-4355-8de3-24a490a36e56 - 307 0 null 15.9999ms
2025-09-30 18:32:23.384 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users/df11b04f-7c59-4355-8de3-24a490a36e56 - application/json 82
2025-09-30 18:32:23.410 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:32:23.416 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-30 18:32:23.419 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:32:23.423 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:32:23.427 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:32:23.432 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:32:23.436 +03:00 [INF] Incomming Request: GET /api/Users/df11b04f-7c59-4355-8de3-24a490a36e56
2025-09-30 18:32:23.440 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 18:32:23.456 +03:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:32:23.476 +03:00 [INF] Executing an action GetById on controller Users.
2025-09-30 18:32:23.648 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [AspNetUsers] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-30 18:32:23.779 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 18:32:23.797 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.UserDtos.UserProfileDto'.
2025-09-30 18:32:23.817 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API) in 349.3406ms
2025-09-30 18:32:23.825 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 18:32:23.839 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:32:23.844 +03:00 [INF] Generating expiration headers.
2025-09-30 18:32:23.849 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:33:23 GMT. Cache-Control: public,max-age=60.
2025-09-30 18:32:23.855 +03:00 [INF] Generating Validation headers.
2025-09-30 18:32:23.863 +03:00 [INF] Validation headers generated. ETag: Strong, "4BAF65B2CD22E735863568F9E4C9A34E". Last-Modified: Tue, 30 Sep 2025 15:32:23 GMT
2025-09-30 18:32:23.869 +03:00 [INF] Generating Vary header.
2025-09-30 18:32:23.873 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:32:23.878 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users/df11b04f-7c59-4355-8de3-24a490a36e56 - 200 null application/json; charset=utf-8 494.0475ms
2025-09-30 18:35:05.477 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Assign - application/json 82
2025-09-30 18:35:05.517 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Users/Roles/Assign - 307 0 null 40.0498ms
2025-09-30 18:35:05.527 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Assign - application/json 82
2025-09-30 18:35:05.560 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:35:05.567 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-30 18:35:05.574 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:35:05.583 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:35:05.593 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:35:05.604 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:35:05.611 +03:00 [INF] Incomming Request: POST /api/Users/Roles/Assign
2025-09-30 18:35:05.624 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.AssignRole (LibraryManagementSystem.API)'
2025-09-30 18:35:05.654 +03:00 [INF] Route matched with {action = "AssignRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignRole(LibraryManagementSystem.Business.Dtos.UserDtos.AssignRoleDto) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:35:05.687 +03:00 [INF] Executing an action AssignRole on controller Users.
2025-09-30 18:35:05.715 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-30 18:35:05.765 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-30 18:35:05.799 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 18:35:05.839 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-30 18:35:05.885 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 18:35:05.919 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-09-30 18:35:05.974 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-09-30 18:35:06.042 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-30 18:35:06.075 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-30 18:35:06.131 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p19='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p20='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PersonId] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [RefreshToken] = @p14, [RefreshTokenExpiryTime] = @p15, [SecurityStamp] = @p16, [TwoFactorEnabled] = @p17, [UserName] = @p18
OUTPUT 1
WHERE [Id] = @p19 AND [ConcurrencyStamp] = @p20;
2025-09-30 18:35:06.225 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-09-30 18:35:06.236 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.AssignRole (LibraryManagementSystem.API) in 552.9789ms
2025-09-30 18:35:06.253 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.AssignRole (LibraryManagementSystem.API)'
2025-09-30 18:35:06.262 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:35:06.270 +03:00 [INF] Generating expiration headers.
2025-09-30 18:35:06.277 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:36:06 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-30 18:35:06.286 +03:00 [INF] Generating Validation headers.
2025-09-30 18:35:06.295 +03:00 [INF] Validation headers generated. ETag: Strong, "AC982EA7E39B8DEC2739E161266D02C6". Last-Modified: Tue, 30 Sep 2025 15:35:06 GMT
2025-09-30 18:35:06.308 +03:00 [INF] Generating Vary header.
2025-09-30 18:35:06.322 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:35:06.341 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Users/Roles/Assign - 200 null text/plain; charset=utf-8 813.6125ms
2025-09-30 18:35:34.084 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Users/df11b04f-7c59-4355-8de3-24a490a36e56 - application/json 82
2025-09-30 18:35:34.105 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Users/df11b04f-7c59-4355-8de3-24a490a36e56 - 307 0 null 23.2619ms
2025-09-30 18:35:34.110 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Users/df11b04f-7c59-4355-8de3-24a490a36e56 - application/json 82
2025-09-30 18:35:34.148 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-30 18:35:34.152 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-30 18:35:34.157 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-30 18:35:34.164 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-30 18:35:34.170 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-30 18:35:34.178 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-30 18:35:34.185 +03:00 [INF] Incomming Request: GET /api/Users/df11b04f-7c59-4355-8de3-24a490a36e56
2025-09-30 18:35:34.192 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 18:35:34.204 +03:00 [INF] Route matched with {action = "GetById", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.String) on controller LibraryManagementSystem.API.Controllers.UsersController (LibraryManagementSystem.API).
2025-09-30 18:35:34.213 +03:00 [INF] Executing an action GetById on controller Users.
2025-09-30 18:35:34.220 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [AspNetUsers] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-30 18:35:34.245 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-30 18:35:34.268 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.UserDtos.UserProfileDto'.
2025-09-30 18:35:34.278 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API) in 66.1466ms
2025-09-30 18:35:34.287 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.UsersController.GetById (LibraryManagementSystem.API)'
2025-09-30 18:35:34.293 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-30 18:35:34.298 +03:00 [INF] Generating expiration headers.
2025-09-30 18:35:34.307 +03:00 [INF] Expiration headers generated. Expires: Tue, 30 Sep 2025 15:36:34 GMT. Cache-Control: public,max-age=60.
2025-09-30 18:35:34.318 +03:00 [INF] Generating Validation headers.
2025-09-30 18:35:34.325 +03:00 [INF] Validation headers generated. ETag: Strong, "88DDD845484A772866E9BD1B37169219". Last-Modified: Tue, 30 Sep 2025 15:35:34 GMT
2025-09-30 18:35:34.330 +03:00 [INF] Generating Vary header.
2025-09-30 18:35:34.336 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-30 18:35:34.341 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Users/df11b04f-7c59-4355-8de3-24a490a36e56 - 200 null application/json; charset=utf-8 230.9407ms
