2025-09-25 08:43:22.741 +03:00 [INF] Starting database seeding.
2025-09-25 08:43:23.486 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 08:43:25.651 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 08:43:25.726 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 08:43:25.729 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 08:43:25.745 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 08:43:25.786 +03:00 [INF] Database seeding finished successfully.
2025-09-25 08:47:56.229 +03:00 [INF] Starting database seeding.
2025-09-25 08:47:56.476 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 08:47:57.646 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 08:47:57.705 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 08:47:57.709 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 08:47:57.720 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 08:47:57.752 +03:00 [INF] Database seeding finished successfully.
2025-09-25 09:10:22.969 +03:00 [INF] Starting database seeding.
2025-09-25 09:10:23.552 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 09:10:25.322 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 09:10:25.381 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 09:10:25.385 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 09:10:25.396 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 09:10:25.428 +03:00 [INF] Database seeding finished successfully.
2025-09-25 09:10:26.168 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 09:10:26.169 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 09:10:26.292 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 09:10:26.293 +03:00 [INF] Hosting environment: Development
2025-09-25 09:10:26.295 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 09:10:41.019 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 09:10:41.107 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 96.3331ms
2025-09-25 09:10:41.190 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 09:10:41.276 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 09:10:41.280 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 09:10:41.281 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 09:10:41.285 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 09:10:41.286 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 09:10:41.288 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 09:10:43.334 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/24/2025 1:55:11 PM', Current time (UTC): '9/25/2025 6:10:43 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 09:10:43.362 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/24/2025 1:55:11 PM', Current time (UTC): '9/25/2025 6:10:43 AM'.
2025-09-25 09:10:43.383 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 09:10:43.447 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-25 09:10:43.453 +03:00 [INF] Generating expiration headers.
2025-09-25 09:10:43.460 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 06:11:43 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 09:10:43.464 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 09:10:43.466 +03:00 [INF] Generating Vary header.
2025-09-25 09:10:43.468 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 09:10:43.473 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 401 null application/problem+json 2282.9969ms
2025-09-25 09:13:33.725 +03:00 [INF] Starting database seeding.
2025-09-25 09:13:33.986 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 09:13:35.150 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 09:13:35.209 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 09:13:35.213 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 09:13:35.225 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 09:13:35.263 +03:00 [INF] Database seeding finished successfully.
2025-09-25 09:13:35.530 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 09:13:35.532 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 09:13:35.616 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 09:13:35.618 +03:00 [INF] Hosting environment: Development
2025-09-25 09:13:35.620 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 09:14:01.300 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 09:14:01.407 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 110.9984ms
2025-09-25 09:14:01.466 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 09:14:01.484 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 09:14:01.486 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 09:14:01.488 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 09:14:01.491 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 09:14:01.493 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 09:14:01.494 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 09:14:01.606 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/24/2025 1:55:11 PM', Current time (UTC): '9/25/2025 6:14:01 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 09:14:01.622 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/24/2025 1:55:11 PM', Current time (UTC): '9/25/2025 6:14:01 AM'.
2025-09-25 09:14:01.631 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 09:14:01.640 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-25 09:14:01.644 +03:00 [INF] Generating expiration headers.
2025-09-25 09:14:01.646 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 06:15:01 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 09:14:01.648 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 09:14:01.650 +03:00 [INF] Generating Vary header.
2025-09-25 09:14:01.651 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 09:14:01.656 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 401 0 null 189.7978ms
2025-09-25 10:25:27.136 +03:00 [INF] Starting database seeding.
2025-09-25 10:25:27.362 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 10:25:28.592 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 10:25:28.655 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 10:25:28.660 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 10:25:28.673 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:25:28.706 +03:00 [INF] Database seeding finished successfully.
2025-09-25 10:25:28.989 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 10:25:28.991 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 10:25:29.081 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 10:25:29.082 +03:00 [INF] Hosting environment: Development
2025-09-25 10:25:29.085 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 10:25:34.058 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 10:25:34.123 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 69.9241ms
2025-09-25 10:25:34.200 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 10:25:34.233 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 10:25:34.237 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 10:25:34.242 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 10:25:34.264 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 10:25:34.266 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 10:25:34.268 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 10:25:34.428 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/24/2025 1:55:11 PM', Current time (UTC): '9/25/2025 7:25:34 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 10:25:34.511 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/24/2025 1:55:11 PM', Current time (UTC): '9/25/2025 7:25:34 AM'.
2025-09-25 10:25:34.529 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 10:25:34.548 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-25 10:25:34.554 +03:00 [INF] Generating expiration headers.
2025-09-25 10:25:34.557 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 07:26:34 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 10:25:34.564 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 10:25:34.566 +03:00 [INF] Generating Vary header.
2025-09-25 10:25:34.567 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 10:25:34.571 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 401 null application/problem+json 371.3278ms
2025-09-25 10:56:26.794 +03:00 [INF] Starting database seeding.
2025-09-25 10:56:27.030 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 10:56:28.245 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 10:56:28.305 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 10:56:28.309 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 10:56:28.320 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:56:28.355 +03:00 [INF] Database seeding finished successfully.
2025-09-25 10:56:28.648 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 10:56:28.650 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 10:56:28.742 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 10:56:28.744 +03:00 [INF] Hosting environment: Development
2025-09-25 10:56:28.745 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 10:56:50.025 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 10:56:50.097 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 83.3985ms
2025-09-25 10:56:50.143 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 10:56:50.159 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 10:56:50.160 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 10:56:50.161 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 10:56:50.164 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 10:56:50.166 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 10:56:50.168 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 10:56:50.344 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/24/2025 1:55:11 PM', Current time (UTC): '9/25/2025 7:56:50 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 10:56:50.362 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/24/2025 1:55:11 PM', Current time (UTC): '9/25/2025 7:56:50 AM'.
2025-09-25 10:56:50.374 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 10:56:50.436 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-25 10:56:50.442 +03:00 [INF] Generating expiration headers.
2025-09-25 10:56:50.444 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 07:57:50 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 10:56:50.448 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 10:56:50.451 +03:00 [INF] Generating Vary header.
2025-09-25 10:56:50.453 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 10:56:50.459 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 401 null application/problem+json 316.0609ms
2025-09-25 10:57:23.508 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 10:57:23.513 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 6.2696ms
2025-09-25 10:57:23.522 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 10:57:23.529 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 10:57:23.530 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 10:57:23.531 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 10:57:23.532 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 10:57:23.533 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 10:57:23.535 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 10:57:23.540 +03:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14101: Unable to decode the payload '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output, Boolean needReplace, Int32 decodedLength)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-09-25 10:57:23.549 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14101: Unable to decode the payload '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-09-25 10:57:23.552 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 10:57:23.554 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-25 10:57:23.556 +03:00 [INF] Generating expiration headers.
2025-09-25 10:57:23.557 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 07:58:23 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 10:57:23.560 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 10:57:23.561 +03:00 [INF] Generating Vary header.
2025-09-25 10:57:23.562 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 10:57:23.563 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 401 null application/problem+json 40.7662ms
2025-09-25 10:59:01.044 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Token/Refresh - application/json 503
2025-09-25 10:59:01.086 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Token/Refresh - 307 0 null 42.1665ms
2025-09-25 10:59:01.089 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Token/Refresh - application/json 503
2025-09-25 10:59:01.095 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 10:59:01.096 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 10:59:01.097 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 10:59:01.098 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 10:59:01.099 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 10:59:01.100 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 10:59:01.105 +03:00 [INF] Incomming Request: POST /api/Token/Refresh
2025-09-25 10:59:01.107 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.TokenController.Refresh (LibraryManagementSystem.API)'
2025-09-25 10:59:01.135 +03:00 [INF] Route matched with {action = "Refresh", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(LibraryManagementSystem.Business.Dtos.AccountDtos.TokenDto) on controller LibraryManagementSystem.API.Controllers.TokenController (LibraryManagementSystem.API).
2025-09-25 10:59:01.384 +03:00 [INF] Executing an action Refresh on controller Token.
2025-09-25 10:59:01.577 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-25 11:02:23.108 +03:00 [INF] Starting database seeding.
2025-09-25 11:02:23.396 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:02:24.952 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:02:25.011 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:02:25.017 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:02:25.030 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:02:25.071 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:02:25.369 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 11:02:25.371 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 11:02:25.482 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:02:25.483 +03:00 [INF] Hosting environment: Development
2025-09-25 11:02:25.485 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 11:02:28.964 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Token/Refresh - application/json 503
2025-09-25 11:02:29.030 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Token/Refresh - 307 0 null 74.035ms
2025-09-25 11:02:29.082 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Token/Refresh - application/json 503
2025-09-25 11:02:29.102 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:02:29.104 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:02:29.106 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:02:29.110 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:02:29.112 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:02:29.113 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:02:29.173 +03:00 [INF] Incomming Request: POST /api/Token/Refresh
2025-09-25 11:02:29.176 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.TokenController.Refresh (LibraryManagementSystem.API)'
2025-09-25 11:02:29.202 +03:00 [INF] Route matched with {action = "Refresh", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(LibraryManagementSystem.Business.Dtos.AccountDtos.TokenDto) on controller LibraryManagementSystem.API.Controllers.TokenController (LibraryManagementSystem.API).
2025-09-25 11:02:29.403 +03:00 [INF] Executing an action Refresh on controller Token.
2025-09-25 11:02:29.672 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-25 11:04:27.724 +03:00 [INF] Starting database seeding.
2025-09-25 11:04:27.988 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:04:29.467 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:04:29.546 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:04:29.550 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:04:29.569 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:04:29.635 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:04:30.083 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 11:04:30.084 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 11:04:30.235 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:04:30.236 +03:00 [INF] Hosting environment: Development
2025-09-25 11:04:30.238 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 11:08:55.266 +03:00 [INF] Starting database seeding.
2025-09-25 11:08:55.622 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:08:57.436 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:08:57.500 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:08:57.503 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:08:57.515 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:08:57.549 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:08:57.887 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 11:08:57.889 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 11:08:58.013 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:08:58.014 +03:00 [INF] Hosting environment: Development
2025-09-25 11:08:58.015 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 11:09:15.509 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Token/Refresh - application/json 503
2025-09-25 11:09:15.564 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Token/Refresh - 307 0 null 60.6589ms
2025-09-25 11:09:15.606 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Token/Refresh - application/json 503
2025-09-25 11:09:15.622 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:09:15.624 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:09:15.626 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:09:15.628 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:09:15.629 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:09:15.630 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:09:15.690 +03:00 [INF] Incomming Request: POST /api/Token/Refresh
2025-09-25 11:09:15.693 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.TokenController.Refresh (LibraryManagementSystem.API)'
2025-09-25 11:09:15.712 +03:00 [INF] Route matched with {action = "Refresh", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(LibraryManagementSystem.Business.Dtos.AccountDtos.TokenDto) on controller LibraryManagementSystem.API.Controllers.TokenController (LibraryManagementSystem.API).
2025-09-25 11:09:15.861 +03:00 [INF] Executing an action Refresh on controller Token.
2025-09-25 11:09:16.079 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-25 11:11:11.551 +03:00 [INF] Starting database seeding.
2025-09-25 11:11:11.936 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:11:13.638 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:11:13.705 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:11:13.710 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:11:13.721 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:11:13.757 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:11:14.085 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 11:11:14.086 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 11:11:14.200 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:11:14.202 +03:00 [INF] Hosting environment: Development
2025-09-25 11:11:14.204 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 11:11:17.731 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Accounts/Login - application/json 79
2025-09-25 11:11:17.789 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Accounts/Login - 307 0 null 63.5319ms
2025-09-25 11:11:17.856 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Accounts/Login - application/json 79
2025-09-25 11:11:17.871 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:11:17.873 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:11:17.874 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:11:17.877 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:11:17.878 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:11:17.879 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:11:17.938 +03:00 [INF] Incomming Request: POST /api/Accounts/Login
2025-09-25 11:11:17.941 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.AccountsController.Login (LibraryManagementSystem.API)'
2025-09-25 11:11:17.961 +03:00 [INF] Route matched with {action = "Login", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LibraryManagementSystem.Business.Dtos.AccountDtos.LoginDto) on controller LibraryManagementSystem.API.Controllers.AccountsController (LibraryManagementSystem.API).
2025-09-25 11:11:18.107 +03:00 [INF] Executing an action Login on controller Accounts.
2025-09-25 11:11:18.161 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-25 11:11:18.380 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-25 11:11:18.431 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-25 11:11:18.446 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:11:18.562 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-25 11:11:18.592 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.AccountDtos.TokenDto'.
2025-09-25 11:11:18.602 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.AccountsController.Login (LibraryManagementSystem.API) in 634.4191ms
2025-09-25 11:11:18.607 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.AccountsController.Login (LibraryManagementSystem.API)'
2025-09-25 11:11:18.610 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:11:18.613 +03:00 [INF] Generating expiration headers.
2025-09-25 11:11:18.614 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:12:18 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:11:18.617 +03:00 [INF] Generating Validation headers.
2025-09-25 11:11:18.631 +03:00 [INF] Validation headers generated. ETag: Strong, "22F0BE0C0CC437467F67CEB162C1E381". Last-Modified: Thu, 25 Sep 2025 08:11:18 GMT
2025-09-25 11:11:18.633 +03:00 [INF] Generating Vary header.
2025-09-25 11:11:18.634 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:11:18.649 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Accounts/Login - 200 null application/json; charset=utf-8 792.9788ms
2025-09-25 11:11:51.454 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 11:11:51.458 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 4.9445ms
2025-09-25 11:11:51.494 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 11:11:51.499 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:11:51.500 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:11:51.502 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:11:51.504 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:11:51.505 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:11:51.506 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:11:51.546 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 11:11:51.553 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-25 11:11:51.554 +03:00 [INF] Generating expiration headers.
2025-09-25 11:11:51.557 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:12:51 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:11:51.559 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:11:51.560 +03:00 [INF] Generating Vary header.
2025-09-25 11:11:51.562 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:11:51.564 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 403 0 null 69.7836ms
2025-09-25 11:11:59.358 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 11:11:59.363 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 5.1947ms
2025-09-25 11:11:59.365 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 11:11:59.370 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:11:59.371 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:11:59.373 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:11:59.376 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:11:59.378 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:11:59.380 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:11:59.382 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 11:11:59.384 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-25 11:11:59.385 +03:00 [INF] Generating expiration headers.
2025-09-25 11:11:59.386 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:12:59 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:11:59.388 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:11:59.389 +03:00 [INF] Generating Vary header.
2025-09-25 11:11:59.391 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:11:59.392 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 403 0 null 27.3648ms
2025-09-25 11:14:27.174 +03:00 [INF] Starting database seeding.
2025-09-25 11:14:27.608 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:14:29.187 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:14:29.271 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:14:29.275 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:14:29.288 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:14:29.321 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:19:01.653 +03:00 [INF] Starting database seeding.
2025-09-25 11:19:01.918 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:19:03.168 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:19:03.233 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:19:03.237 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:19:03.250 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:19:03.282 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:19:03.551 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 11:19:03.553 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 11:19:03.639 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:19:03.641 +03:00 [INF] Hosting environment: Development
2025-09-25 11:19:03.643 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 11:19:10.263 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 11:19:10.330 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 77.8824ms
2025-09-25 11:19:10.366 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 11:19:10.381 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:19:10.382 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:19:10.383 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:19:10.385 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:19:10.386 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:19:10.389 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:19:10.535 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 11:19:10.569 +03:00 [INF] Generating expiration headers.
2025-09-25 11:19:10.571 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:20:10 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:19:10.577 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:19:10.578 +03:00 [INF] Generating Vary header.
2025-09-25 11:19:10.579 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:19:10.583 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 403 null application/problem+json 217.1889ms
2025-09-25 11:19:19.450 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 11:19:19.460 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 10.0063ms
2025-09-25 11:19:19.464 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 11:19:19.471 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:19:19.472 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:19:19.473 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:19:19.475 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:19:19.476 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:19:19.477 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:19:19.479 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 11:19:19.481 +03:00 [INF] Generating expiration headers.
2025-09-25 11:19:19.482 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:20:19 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:19:19.483 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:19:19.485 +03:00 [INF] Generating Vary header.
2025-09-25 11:19:19.487 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:19:19.488 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 403 null application/problem+json 24.9117ms
2025-09-25 11:19:21.876 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 11:19:21.882 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 5.6151ms
2025-09-25 11:19:21.883 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 11:19:21.890 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:19:21.890 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:19:21.891 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:19:21.893 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:19:21.894 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:19:21.895 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:19:21.899 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 11:19:21.903 +03:00 [INF] Generating expiration headers.
2025-09-25 11:19:21.904 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:20:21 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:19:21.906 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:19:21.907 +03:00 [INF] Generating Vary header.
2025-09-25 11:19:21.908 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:19:21.909 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 403 null application/problem+json 26.2494ms
2025-09-25 11:19:24.361 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books - application/json 109
2025-09-25 11:19:24.368 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books - 307 0 null 7.695ms
2025-09-25 11:19:24.369 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books - application/json 109
2025-09-25 11:19:24.377 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:19:24.378 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:19:24.379 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:19:24.380 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:19:24.381 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:19:24.382 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:19:24.384 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 11:19:24.387 +03:00 [INF] Generating expiration headers.
2025-09-25 11:19:24.388 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:20:24 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:19:24.389 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:19:24.390 +03:00 [INF] Generating Vary header.
2025-09-25 11:19:24.391 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:19:24.393 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books - 403 null application/problem+json 23.575ms
2025-09-25 11:22:15.366 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/1 - application/json 93
2025-09-25 11:22:15.377 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/1 - 307 0 null 10.3466ms
2025-09-25 11:22:15.378 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/1 - application/json 93
2025-09-25 11:22:15.383 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:22:15.384 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:22:15.385 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:22:15.387 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:22:15.389 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:22:15.390 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:22:15.393 +03:00 [INF] Incomming Request: POST /api/Books/1
2025-09-25 11:22:15.396 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-25 11:22:15.398 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-25 11:22:15.399 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:22:15.400 +03:00 [INF] Generating expiration headers.
2025-09-25 11:22:15.401 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:23:15 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:22:15.403 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:22:15.404 +03:00 [INF] Generating Vary header.
2025-09-25 11:22:15.405 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:22:15.406 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/1 - 405 0 null 28.1261ms
2025-09-25 11:23:15.493 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/1 - application/json 93
2025-09-25 11:23:15.503 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/1 - 307 0 null 10.0292ms
2025-09-25 11:23:15.505 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/1 - application/json 93
2025-09-25 11:23:15.511 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:23:15.512 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:23:15.514 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:23:15.515 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:23:15.517 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:23:15.519 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:23:15.521 +03:00 [INF] Incomming Request: POST /api/Books/1
2025-09-25 11:23:15.523 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-25 11:23:15.525 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-25 11:23:15.527 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:23:15.529 +03:00 [INF] Generating expiration headers.
2025-09-25 11:23:15.530 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:24:15 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:23:15.532 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:23:15.534 +03:00 [INF] Generating Vary header.
2025-09-25 11:23:15.535 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:23:15.538 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/1 - 405 0 null 33.1222ms
2025-09-25 11:25:04.254 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 93
2025-09-25 11:25:04.262 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 8.6611ms
2025-09-25 11:25:04.263 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 93
2025-09-25 11:25:04.268 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:25:04.269 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:25:04.271 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:25:04.272 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:25:04.279 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:25:04.280 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:25:04.282 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 11:25:04.283 +03:00 [INF] Generating expiration headers.
2025-09-25 11:25:04.285 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:26:04 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:25:04.287 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:25:04.288 +03:00 [INF] Generating Vary header.
2025-09-25 11:25:04.289 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:25:04.291 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 403 null application/problem+json 27.6953ms
2025-09-25 11:25:57.133 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Accounts/Login - application/json 67
2025-09-25 11:25:57.177 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Accounts/Login - 307 0 null 43.1367ms
2025-09-25 11:25:57.203 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Accounts/Login - application/json 67
2025-09-25 11:25:57.235 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:25:57.238 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:25:57.240 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:25:57.242 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:25:57.243 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 11:25:57.244 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:25:57.246 +03:00 [INF] Incomming Request: POST /api/Accounts/Login
2025-09-25 11:25:57.255 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.AccountsController.Login (LibraryManagementSystem.API)'
2025-09-25 11:25:57.293 +03:00 [INF] Route matched with {action = "Login", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LibraryManagementSystem.Business.Dtos.AccountDtos.LoginDto) on controller LibraryManagementSystem.API.Controllers.AccountsController (LibraryManagementSystem.API).
2025-09-25 11:25:57.453 +03:00 [INF] Executing an action Login on controller Accounts.
2025-09-25 11:25:57.515 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-25 11:25:57.663 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-25 11:25:57.690 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-25 11:25:57.704 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:25:57.804 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PersonId] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [RefreshToken] = @p12, [RefreshTokenExpiryTime] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-09-25 11:25:57.831 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementSystem.Business.Dtos.AccountDtos.TokenDto'.
2025-09-25 11:25:57.841 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.AccountsController.Login (LibraryManagementSystem.API) in 542.8805ms
2025-09-25 11:25:57.845 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.AccountsController.Login (LibraryManagementSystem.API)'
2025-09-25 11:25:57.847 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:25:57.849 +03:00 [INF] Generating expiration headers.
2025-09-25 11:25:57.850 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:26:57 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:25:57.853 +03:00 [INF] Generating Validation headers.
2025-09-25 11:25:57.863 +03:00 [INF] Validation headers generated. ETag: Strong, "3F08E3391AE3ECE98EDBBA42BF979F0D". Last-Modified: Thu, 25 Sep 2025 08:25:57 GMT
2025-09-25 11:25:57.866 +03:00 [INF] Generating Vary header.
2025-09-25 11:25:57.867 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:25:57.874 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Accounts/Login - 200 null application/json; charset=utf-8 670.9615ms
2025-09-25 11:26:34.187 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 93
2025-09-25 11:26:34.195 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 8.9311ms
2025-09-25 11:26:34.197 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 93
2025-09-25 11:26:34.209 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:26:34.210 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:26:34.211 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:26:34.212 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:26:34.214 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:26:34.216 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:26:34.219 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:26:34.220 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:26:34.228 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:26:34.248 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-25 11:26:34.258 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 26.2923ms
2025-09-25 11:26:34.261 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:26:34.263 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:26:34.264 +03:00 [INF] Generating expiration headers.
2025-09-25 11:26:34.265 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:27:34 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:26:34.267 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:26:34.268 +03:00 [INF] Generating Vary header.
2025-09-25 11:26:34.269 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:26:34.271 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 400 null application/problem+json; charset=utf-8 73.3062ms
2025-09-25 11:27:10.616 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 92
2025-09-25 11:27:10.623 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 7.2133ms
2025-09-25 11:27:10.625 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 92
2025-09-25 11:27:10.636 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:27:10.638 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:27:10.639 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:27:10.640 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:27:10.641 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:27:10.643 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:27:10.645 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:27:10.647 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:27:10.649 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:27:10.654 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-25 11:27:10.656 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 2.8326ms
2025-09-25 11:27:10.658 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:27:10.659 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:27:10.661 +03:00 [INF] Generating expiration headers.
2025-09-25 11:27:10.662 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:28:10 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:27:10.664 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:27:10.665 +03:00 [INF] Generating Vary header.
2025-09-25 11:27:10.666 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:27:10.667 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 400 null application/problem+json; charset=utf-8 41.6054ms
2025-09-25 11:30:32.184 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 92
2025-09-25 11:30:32.190 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 6.0772ms
2025-09-25 11:30:32.192 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 92
2025-09-25 11:30:32.197 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:30:32.198 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:30:32.199 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:30:32.200 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:30:32.202 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:30:32.203 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:30:32.205 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:30:32.206 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:30:32.208 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:30:32.218 +03:00 [INF] Executing an action Update on controller Books.
2025-09-25 11:30:32.246 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:30:32.262 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:30:32.264 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 52.8535ms
2025-09-25 11:30:32.266 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:30:32.268 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:30:32.269 +03:00 [INF] Generating expiration headers.
2025-09-25 11:30:32.270 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:31:32 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:30:32.271 +03:00 [INF] Generating Validation headers.
2025-09-25 11:30:32.273 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:30:32 GMT
2025-09-25 11:30:32.275 +03:00 [INF] Generating Vary header.
2025-09-25 11:30:32.276 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:30:32.278 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 204 null null 86.4872ms
2025-09-25 11:32:20.155 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 92
2025-09-25 11:32:20.165 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 9.5381ms
2025-09-25 11:32:20.166 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 92
2025-09-25 11:32:20.172 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:32:20.174 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:32:20.174 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:32:20.175 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:32:20.176 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:32:20.178 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:32:20.179 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:32:20.180 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:32:20.182 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:32:20.185 +03:00 [INF] Executing an action Update on controller Books.
2025-09-25 11:32:20.190 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:32:20.194 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:32:20.195 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 10.0638ms
2025-09-25 11:32:20.197 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:32:20.198 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:32:20.199 +03:00 [INF] Generating expiration headers.
2025-09-25 11:32:20.200 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:33:20 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:32:20.202 +03:00 [INF] Generating Validation headers.
2025-09-25 11:32:20.204 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:32:20 GMT
2025-09-25 11:32:20.207 +03:00 [INF] Generating Vary header.
2025-09-25 11:32:20.208 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:32:20.209 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 204 null null 43.2571ms
2025-09-25 11:32:39.424 +03:00 [INF] Starting database seeding.
2025-09-25 11:32:39.687 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:32:40.852 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:32:40.913 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:32:40.916 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:32:40.929 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:32:40.962 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:32:41.275 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 11:32:41.277 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 11:32:41.365 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:32:41.367 +03:00 [INF] Hosting environment: Development
2025-09-25 11:32:41.368 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 11:32:45.132 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 92
2025-09-25 11:32:45.198 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 76.5248ms
2025-09-25 11:32:45.240 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 92
2025-09-25 11:32:45.256 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:32:45.258 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:32:45.260 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:32:45.263 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:32:45.269 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:32:45.271 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:32:45.400 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:32:45.403 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:32:45.431 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:32:45.623 +03:00 [INF] Executing an action Update on controller Books.
2025-09-25 11:32:45.690 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:32:45.723 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:32:45.730 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 288.7233ms
2025-09-25 11:32:45.734 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:32:45.737 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:32:45.740 +03:00 [INF] Generating expiration headers.
2025-09-25 11:32:45.743 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:33:45 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:32:45.748 +03:00 [INF] Generating Validation headers.
2025-09-25 11:32:45.760 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:32:45 GMT
2025-09-25 11:32:45.763 +03:00 [INF] Generating Vary header.
2025-09-25 11:32:45.765 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:32:45.775 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 204 null null 534.9858ms
2025-09-25 11:32:54.349 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 92
2025-09-25 11:32:54.354 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 5.9805ms
2025-09-25 11:32:54.357 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 92
2025-09-25 11:32:54.364 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:32:54.365 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:32:54.366 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:32:54.367 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:32:54.368 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:32:54.369 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:32:54.373 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:32:54.376 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:32:54.381 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:32:54.390 +03:00 [INF] Executing an action Update on controller Books.
2025-09-25 11:32:54.404 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:32:54.412 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:32:54.413 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 27.4647ms
2025-09-25 11:32:54.415 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:32:54.417 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:32:54.418 +03:00 [INF] Generating expiration headers.
2025-09-25 11:32:54.420 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:33:54 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:32:54.422 +03:00 [INF] Generating Validation headers.
2025-09-25 11:32:54.425 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:32:54 GMT
2025-09-25 11:32:54.426 +03:00 [INF] Generating Vary header.
2025-09-25 11:32:54.429 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:32:54.431 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 204 null null 73.5096ms
2025-09-25 11:32:56.182 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 92
2025-09-25 11:32:56.186 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 3.587ms
2025-09-25 11:32:56.187 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 92
2025-09-25 11:32:56.194 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:32:56.195 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:32:56.196 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:32:56.197 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:32:56.198 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:32:56.199 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:32:56.203 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:32:56.205 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:32:56.207 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:32:56.217 +03:00 [INF] Executing an action Update on controller Books.
2025-09-25 11:32:56.220 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:32:56.224 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:32:56.226 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 15.3796ms
2025-09-25 11:32:56.228 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:32:56.230 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:32:56.231 +03:00 [INF] Generating expiration headers.
2025-09-25 11:32:56.232 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:33:56 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:32:56.234 +03:00 [INF] Generating Validation headers.
2025-09-25 11:32:56.235 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:32:56 GMT
2025-09-25 11:32:56.236 +03:00 [INF] Generating Vary header.
2025-09-25 11:32:56.237 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:32:56.239 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 204 null null 51.1615ms
2025-09-25 11:32:58.086 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 92
2025-09-25 11:32:58.089 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 3.2083ms
2025-09-25 11:32:58.090 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 92
2025-09-25 11:32:58.098 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:32:58.099 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:32:58.101 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:32:58.103 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:32:58.104 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:32:58.106 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:32:58.108 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:32:58.110 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:32:58.113 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:32:58.117 +03:00 [INF] Executing an action Update on controller Books.
2025-09-25 11:32:58.119 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:32:58.127 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:32:58.129 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 12.7213ms
2025-09-25 11:32:58.135 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:32:58.138 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:32:58.140 +03:00 [INF] Generating expiration headers.
2025-09-25 11:32:58.141 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:33:58 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:32:58.143 +03:00 [INF] Generating Validation headers.
2025-09-25 11:32:58.145 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:32:58 GMT
2025-09-25 11:32:58.147 +03:00 [INF] Generating Vary header.
2025-09-25 11:32:58.148 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:32:58.149 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 204 null null 58.9399ms
2025-09-25 11:33:17.839 +03:00 [INF] Starting database seeding.
2025-09-25 11:33:18.160 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:33:19.391 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:33:19.450 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:33:19.454 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:33:19.465 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:33:19.499 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:33:19.812 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 11:33:19.814 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 11:33:19.904 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:33:19.906 +03:00 [INF] Hosting environment: Development
2025-09-25 11:33:19.908 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 11:34:04.009 +03:00 [INF] Starting database seeding.
2025-09-25 11:34:04.246 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:34:05.675 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:34:05.752 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:34:05.760 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:34:05.790 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:34:05.850 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:34:06.202 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 11:34:06.204 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 11:34:06.296 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:34:06.298 +03:00 [INF] Hosting environment: Development
2025-09-25 11:34:06.300 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 11:36:32.655 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 95
2025-09-25 11:36:32.718 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 67.6161ms
2025-09-25 11:36:32.756 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 95
2025-09-25 11:36:32.771 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:36:32.773 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:36:32.774 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:36:32.778 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:36:32.781 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:36:32.783 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:36:32.902 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:36:32.905 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:36:32.927 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:36:33.097 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-25 11:36:33.123 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 188.8476ms
2025-09-25 11:36:33.127 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:36:33.129 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:36:33.132 +03:00 [INF] Generating expiration headers.
2025-09-25 11:36:33.133 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:37:33 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:36:33.136 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:36:33.137 +03:00 [INF] Generating Vary header.
2025-09-25 11:36:33.138 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:36:33.141 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 400 null application/problem+json; charset=utf-8 385.5731ms
2025-09-25 11:39:09.412 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 95
2025-09-25 11:39:09.419 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 45.0256ms
2025-09-25 11:39:09.428 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 95
2025-09-25 11:39:09.433 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:39:09.434 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:39:09.435 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:39:09.436 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:39:09.437 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:39:09.438 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:39:09.442 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:39:09.444 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:39:09.446 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:39:09.453 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-25 11:39:09.456 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 6.849ms
2025-09-25 11:39:09.458 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:39:09.460 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:39:09.461 +03:00 [INF] Generating expiration headers.
2025-09-25 11:39:09.463 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:40:09 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:39:09.464 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:39:09.466 +03:00 [INF] Generating Vary header.
2025-09-25 11:39:09.467 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:39:09.469 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 400 null application/problem+json; charset=utf-8 40.9445ms
2025-09-25 11:39:11.327 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json 95
2025-09-25 11:39:11.331 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 4.3163ms
2025-09-25 11:39:11.332 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json 95
2025-09-25 11:39:11.337 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:39:11.338 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:39:11.340 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:39:11.343 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:39:11.345 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:39:11.346 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:39:11.349 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:39:11.351 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:39:11.353 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:39:11.364 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-25 11:39:11.367 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 9.6103ms
2025-09-25 11:39:11.369 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:39:11.372 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:39:11.373 +03:00 [INF] Generating expiration headers.
2025-09-25 11:39:11.375 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:40:11 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:39:11.376 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:39:11.377 +03:00 [INF] Generating Vary header.
2025-09-25 11:39:11.378 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:39:11.379 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 400 null application/problem+json; charset=utf-8 47.4248ms
2025-09-25 11:41:15.062 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json-patch+json 95
2025-09-25 11:41:15.109 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 47.1229ms
2025-09-25 11:41:15.111 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json-patch+json 95
2025-09-25 11:41:15.116 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:41:15.117 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:41:15.118 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:41:15.119 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:41:15.120 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:41:15.122 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:41:15.124 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:41:15.125 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:41:15.127 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:41:15.131 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-25 11:41:15.133 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 3.5148ms
2025-09-25 11:41:15.135 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:41:15.137 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:41:15.138 +03:00 [INF] Generating expiration headers.
2025-09-25 11:41:15.139 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:42:15 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:41:15.141 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:41:15.142 +03:00 [INF] Generating Vary header.
2025-09-25 11:41:15.142 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:41:15.144 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 400 null application/problem+json; charset=utf-8 33.2655ms
2025-09-25 11:41:17.091 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json-patch+json 95
2025-09-25 11:41:17.095 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 3.4511ms
2025-09-25 11:41:17.097 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json-patch+json 95
2025-09-25 11:41:17.103 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:41:17.105 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:41:17.106 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:41:17.107 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:41:17.108 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:41:17.109 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:41:17.110 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:41:17.112 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:41:17.114 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:41:17.119 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-25 11:41:17.122 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 4.2793ms
2025-09-25 11:41:17.124 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:41:17.126 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:41:17.127 +03:00 [INF] Generating expiration headers.
2025-09-25 11:41:17.128 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:42:17 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:41:17.129 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:41:17.131 +03:00 [INF] Generating Vary header.
2025-09-25 11:41:17.132 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:41:17.134 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 400 null application/problem+json; charset=utf-8 36.9458ms
2025-09-25 11:43:20.254 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json-patch+json 95
2025-09-25 11:43:20.265 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 10.7714ms
2025-09-25 11:43:20.266 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json-patch+json 95
2025-09-25 11:43:20.273 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:43:20.274 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:43:20.276 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:43:20.278 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:43:20.279 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:43:20.280 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:43:20.281 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:43:20.283 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:43:20.284 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:43:20.289 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-25 11:43:20.291 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 2.8943ms
2025-09-25 11:43:20.293 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:43:20.295 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:43:20.296 +03:00 [INF] Generating expiration headers.
2025-09-25 11:43:20.297 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:44:20 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:43:20.298 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:43:20.300 +03:00 [INF] Generating Vary header.
2025-09-25 11:43:20.301 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:43:20.302 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 400 null application/problem+json; charset=utf-8 35.6703ms
2025-09-25 11:43:21.508 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json-patch+json 95
2025-09-25 11:43:21.511 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 2.92ms
2025-09-25 11:43:21.513 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json-patch+json 95
2025-09-25 11:43:21.519 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:43:21.521 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:43:21.523 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:43:21.525 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:43:21.526 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:43:21.528 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:43:21.529 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:43:21.531 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:43:21.532 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:43:21.537 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-25 11:43:21.540 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 3.9876ms
2025-09-25 11:43:21.542 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:43:21.544 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:43:21.545 +03:00 [INF] Generating expiration headers.
2025-09-25 11:43:21.546 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:44:21 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:43:21.547 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:43:21.548 +03:00 [INF] Generating Vary header.
2025-09-25 11:43:21.549 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:43:21.550 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 400 null application/problem+json; charset=utf-8 37.6661ms
2025-09-25 11:43:22.469 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json-patch+json 95
2025-09-25 11:43:22.473 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 4.3217ms
2025-09-25 11:43:22.475 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json-patch+json 95
2025-09-25 11:43:22.481 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:43:22.483 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:43:22.484 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:43:22.485 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:43:22.486 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:43:22.487 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:43:22.489 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:43:22.490 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:43:22.492 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:43:22.496 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-25 11:43:22.498 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 3.1579ms
2025-09-25 11:43:22.501 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:43:22.503 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:43:22.504 +03:00 [INF] Generating expiration headers.
2025-09-25 11:43:22.506 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:44:22 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:43:22.508 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 11:43:22.509 +03:00 [INF] Generating Vary header.
2025-09-25 11:43:22.510 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:43:22.512 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 400 null application/problem+json; charset=utf-8 37.0978ms
2025-09-25 11:47:44.785 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5132/api/Books/1 - application/json-patch+json 95
2025-09-25 11:47:44.790 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5132/api/Books/1 - 307 0 null 40.1368ms
2025-09-25 11:47:44.791 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7266/api/Books/1 - application/json-patch+json 95
2025-09-25 11:47:44.797 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:47:44.799 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:47:44.800 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:47:44.802 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:47:44.808 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:47:44.810 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:47:44.812 +03:00 [INF] Incomming Request: PATCH /api/Books/1
2025-09-25 11:47:44.814 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Patch (LibraryManagementSystem.API)'
2025-09-25 11:47:44.820 +03:00 [INF] Route matched with {action = "Patch", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Patch(Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto]) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:47:44.958 +03:00 [INF] Executing an action Patch on controller Books.
2025-09-25 11:47:45.027 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:49:21.539 +03:00 [INF] Starting database seeding.
2025-09-25 11:49:21.775 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:49:23.047 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:49:23.120 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:49:23.124 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:49:23.142 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:49:23.185 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:49:23.483 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 11:49:23.484 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 11:49:23.577 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:49:23.579 +03:00 [INF] Hosting environment: Development
2025-09-25 11:49:23.582 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 11:49:24.856 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5132/api/Books/1 - application/json-patch+json 95
2025-09-25 11:49:24.917 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5132/api/Books/1 - 307 0 null 68.7026ms
2025-09-25 11:49:24.951 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7266/api/Books/1 - application/json-patch+json 95
2025-09-25 11:49:24.964 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:49:24.966 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:49:24.968 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:49:24.970 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:49:24.975 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:49:24.976 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:49:25.094 +03:00 [INF] Incomming Request: PATCH /api/Books/1
2025-09-25 11:49:25.098 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Patch (LibraryManagementSystem.API)'
2025-09-25 11:49:25.120 +03:00 [INF] Route matched with {action = "Patch", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Patch(Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto]) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:49:25.481 +03:00 [INF] Executing an action Patch on controller Books.
2025-09-25 11:49:25.543 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:49:25.566 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:49:25.586 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:49:25.591 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Patch (LibraryManagementSystem.API) in 463.8057ms
2025-09-25 11:49:25.595 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Patch (LibraryManagementSystem.API)'
2025-09-25 11:49:25.598 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:49:25.603 +03:00 [INF] Generating expiration headers.
2025-09-25 11:49:25.606 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:50:25 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:49:25.610 +03:00 [INF] Generating Validation headers.
2025-09-25 11:49:25.625 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:49:25 GMT
2025-09-25 11:49:25.628 +03:00 [INF] Generating Vary header.
2025-09-25 11:49:25.629 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:49:25.635 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7266/api/Books/1 - 204 null null 684.6628ms
2025-09-25 11:51:22.869 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5132/api/Books/1 - application/json-patch+json 95
2025-09-25 11:51:22.874 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5132/api/Books/1 - 307 0 null 8.8261ms
2025-09-25 11:51:22.877 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7266/api/Books/1 - application/json-patch+json 95
2025-09-25 11:51:22.884 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:51:22.885 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:51:22.886 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:51:22.888 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:51:22.889 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:51:22.890 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:51:22.893 +03:00 [INF] Incomming Request: PATCH /api/Books/1
2025-09-25 11:51:22.895 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Patch (LibraryManagementSystem.API)'
2025-09-25 11:51:22.897 +03:00 [INF] Route matched with {action = "Patch", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Patch(Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto]) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:51:22.904 +03:00 [INF] Executing an action Patch on controller Books.
2025-09-25 11:51:22.917 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:51:22.924 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:51:22.929 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:51:22.931 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Patch (LibraryManagementSystem.API) in 29.6727ms
2025-09-25 11:51:22.935 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Patch (LibraryManagementSystem.API)'
2025-09-25 11:51:22.937 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:51:22.938 +03:00 [INF] Generating expiration headers.
2025-09-25 11:51:22.939 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:52:22 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:51:22.941 +03:00 [INF] Generating Validation headers.
2025-09-25 11:51:22.943 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:51:22 GMT
2025-09-25 11:51:22.945 +03:00 [INF] Generating Vary header.
2025-09-25 11:51:22.946 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:51:22.948 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7266/api/Books/1 - 204 null null 71.2219ms
2025-09-25 11:51:32.446 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5132/api/Books/1 - application/json-patch+json 81
2025-09-25 11:51:32.451 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5132/api/Books/1 - 307 0 null 5.5367ms
2025-09-25 11:51:32.453 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7266/api/Books/1 - application/json-patch+json 81
2025-09-25 11:51:32.460 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:51:32.462 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:51:32.463 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:51:32.464 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:51:32.466 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:51:32.467 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:51:32.471 +03:00 [INF] Incomming Request: PATCH /api/Books/1
2025-09-25 11:51:32.474 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Patch (LibraryManagementSystem.API)'
2025-09-25 11:51:32.477 +03:00 [INF] Route matched with {action = "Patch", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Patch(Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto]) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:51:32.488 +03:00 [INF] Executing an action Patch on controller Books.
2025-09-25 11:51:32.493 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:51:32.499 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:51:32.503 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:51:32.505 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Patch (LibraryManagementSystem.API) in 23.6997ms
2025-09-25 11:51:32.508 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Patch (LibraryManagementSystem.API)'
2025-09-25 11:51:32.511 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:51:32.513 +03:00 [INF] Generating expiration headers.
2025-09-25 11:51:32.514 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:52:32 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:51:32.516 +03:00 [INF] Generating Validation headers.
2025-09-25 11:51:32.517 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:51:32 GMT
2025-09-25 11:51:32.519 +03:00 [INF] Generating Vary header.
2025-09-25 11:51:32.520 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:51:32.522 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7266/api/Books/1 - 204 null null 68.7147ms
2025-09-25 11:53:16.778 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json-patch+json 92
2025-09-25 11:53:16.787 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 8.5561ms
2025-09-25 11:53:16.788 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json-patch+json 92
2025-09-25 11:53:16.795 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:53:16.796 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:53:16.797 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:53:16.798 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:53:16.799 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:53:16.800 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:53:16.802 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:53:16.804 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:53:16.810 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:53:16.830 +03:00 [INF] Executing an action Update on controller Books.
2025-09-25 11:53:16.834 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:53:16.839 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:53:16.841 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 25.7372ms
2025-09-25 11:53:16.844 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:53:16.846 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:53:16.847 +03:00 [INF] Generating expiration headers.
2025-09-25 11:53:16.848 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:54:16 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:53:16.850 +03:00 [INF] Generating Validation headers.
2025-09-25 11:53:16.851 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:53:16 GMT
2025-09-25 11:53:16.853 +03:00 [INF] Generating Vary header.
2025-09-25 11:53:16.854 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:53:16.856 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 204 null null 67.2514ms
2025-09-25 11:56:41.007 +03:00 [INF] Starting database seeding.
2025-09-25 11:56:41.230 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:56:42.475 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:56:42.538 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:56:42.543 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 11:56:42.566 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:56:42.602 +03:00 [INF] Database seeding finished successfully.
2025-09-25 11:56:42.919 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 11:56:42.921 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 11:56:43.015 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:56:43.020 +03:00 [INF] Hosting environment: Development
2025-09-25 11:56:43.022 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 11:56:45.038 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json-patch+json 92
2025-09-25 11:56:45.092 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 60.8808ms
2025-09-25 11:56:45.131 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json-patch+json 92
2025-09-25 11:56:45.149 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 11:56:45.151 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 11:56:45.154 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 11:56:45.157 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 11:56:45.161 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 11:56:45.162 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 11:56:45.292 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 11:56:45.297 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:56:45.318 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 11:56:45.478 +03:00 [INF] Executing an action Update on controller Books.
2025-09-25 11:56:45.535 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 11:58:02.479 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 11:58:03.693 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 78364.874ms
2025-09-25 11:58:03.697 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 11:58:03.700 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 11:58:03.704 +03:00 [INF] Generating expiration headers.
2025-09-25 11:58:03.706 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 08:59:03 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 11:58:03.710 +03:00 [INF] Generating Validation headers.
2025-09-25 11:58:03.726 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 08:58:03 GMT
2025-09-25 11:58:03.730 +03:00 [INF] Generating Vary header.
2025-09-25 11:58:03.732 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 11:58:03.740 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 204 null null 78608.6604ms
2025-09-25 12:04:10.688 +03:00 [INF] Starting database seeding.
2025-09-25 12:04:11.046 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 12:04:12.280 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 12:04:12.346 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 12:04:12.350 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 12:04:12.362 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:04:12.410 +03:00 [INF] Database seeding finished successfully.
2025-09-25 12:04:12.791 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 12:04:12.793 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 12:04:12.886 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 12:04:12.888 +03:00 [INF] Hosting environment: Development
2025-09-25 12:04:12.890 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 12:04:20.456 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5132/api/Books/1 - application/json-patch+json 92
2025-09-25 12:04:20.555 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5132/api/Books/1 - 307 0 null 106.527ms
2025-09-25 12:04:20.605 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7266/api/Books/1 - application/json-patch+json 92
2025-09-25 12:04:20.619 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 12:04:20.621 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 12:04:20.623 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 12:04:20.626 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 12:04:20.629 +03:00 [INF] Not valid - no If Match or If Unmodified-Since headers.
2025-09-25 12:04:20.630 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 12:04:20.790 +03:00 [INF] Incomming Request: PUT /api/Books/1
2025-09-25 12:04:20.795 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 12:04:20.831 +03:00 [INF] Route matched with {action = "Update", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, LibraryManagementSystem.Business.Dtos.BookDtos.UpdateBookDto) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 12:04:21.031 +03:00 [INF] Executing an action Update on controller Books.
2025-09-25 12:04:21.104 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-25 12:04:28.392 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 13), @p1='?' (DbType = Int32), @p2='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Books] SET [ISBN] = @p0, [PublishYear] = @p1, [Title] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-09-25 12:04:28.416 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 12:04:28.422 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API) in 7583.2948ms
2025-09-25 12:04:28.425 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Update (LibraryManagementSystem.API)'
2025-09-25 12:04:28.428 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 12:04:28.432 +03:00 [INF] Generating expiration headers.
2025-09-25 12:04:28.435 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 09:05:28 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 12:04:28.438 +03:00 [INF] Generating Validation headers.
2025-09-25 12:04:28.450 +03:00 [INF] Validation headers generated. ETag: Strong, "882BE9B7B87EA3F475E049034244E57F". Last-Modified: Thu, 25 Sep 2025 09:04:28 GMT
2025-09-25 12:04:28.453 +03:00 [INF] Generating Vary header.
2025-09-25 12:04:28.454 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 12:04:28.460 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7266/api/Books/1 - 204 null null 7855.3986ms
2025-09-25 15:40:07.222 +03:00 [INF] Starting database seeding.
2025-09-25 15:40:07.777 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 15:40:11.654 +03:00 [INF] Executed DbCommand (140ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:40:11.841 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:40:11.855 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:40:11.890 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 15:40:11.986 +03:00 [INF] Database seeding finished successfully.
2025-09-25 15:40:12.837 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 15:40:12.842 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 15:40:13.105 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 15:40:13.110 +03:00 [INF] Hosting environment: Development
2025-09-25 15:40:13.115 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 15:40:16.781 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Books/1/Authors/1 - application/json-patch+json null
2025-09-25 15:40:16.945 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Books/1/Authors/1 - 307 0 null 175.9289ms
2025-09-25 15:40:17.007 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Books/1/Authors/1 - application/json-patch+json null
2025-09-25 15:40:17.041 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 15:40:17.047 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-25 15:40:17.049 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 15:40:17.055 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 15:40:17.057 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 15:40:17.061 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 15:40:17.399 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:40:17 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 15:40:17.434 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:40:17 PM'.
2025-09-25 15:40:17.443 +03:00 [INF] Incomming Request: GET /api/Books/1/Authors/1
2025-09-25 15:40:17.448 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-25 15:40:17.451 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-25 15:40:17.507 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 15:40:17.514 +03:00 [INF] Generating expiration headers.
2025-09-25 15:40:17.520 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 12:41:17 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 15:40:17.526 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 15:40:17.530 +03:00 [INF] Generating Vary header.
2025-09-25 15:40:17.533 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 15:40:17.540 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Books/1/Authors/1 - 405 null application/problem+json 533.92ms
2025-09-25 15:41:01.937 +03:00 [INF] Starting database seeding.
2025-09-25 15:41:02.644 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 15:41:06.693 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:41:06.898 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:41:06.905 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:41:06.938 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 15:41:07.036 +03:00 [INF] Database seeding finished successfully.
2025-09-25 15:41:08.148 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 15:41:08.154 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 15:41:08.479 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 15:41:08.482 +03:00 [INF] Hosting environment: Development
2025-09-25 15:41:08.488 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 15:41:10.407 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Books/1/Authors/1 - application/json-patch+json null
2025-09-25 15:41:10.667 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Books/1/Authors/1 - 307 0 null 299.6822ms
2025-09-25 15:41:10.784 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Books/1/Authors/1 - application/json-patch+json null
2025-09-25 15:41:10.837 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 15:41:10.849 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-25 15:41:10.853 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 15:41:10.862 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 15:41:10.866 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 15:41:10.870 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 15:41:11.248 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:41:11 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 15:41:11.299 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:41:11 PM'.
2025-09-25 15:41:11.331 +03:00 [INF] Incomming Request: GET /api/Books/1/Authors/1
2025-09-25 15:41:11.340 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-25 15:41:11.344 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-25 15:41:11.347 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 15:41:11.355 +03:00 [INF] Generating expiration headers.
2025-09-25 15:41:11.360 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 12:42:11 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 15:41:11.369 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 15:41:11.371 +03:00 [INF] Generating Vary header.
2025-09-25 15:41:11.374 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 15:41:11.382 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Books/1/Authors/1 - 405 0 null 598.2327ms
2025-09-25 15:41:15.765 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Books/1/Authors/1 - application/json-patch+json null
2025-09-25 15:41:15.792 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Books/1/Authors/1 - 307 0 null 27.4538ms
2025-09-25 15:41:15.802 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Books/1/Authors/1 - application/json-patch+json null
2025-09-25 15:41:15.871 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 15:41:15.891 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-25 15:41:15.904 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 15:41:15.915 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 15:41:15.922 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 15:41:15.933 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 15:41:15.949 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:41:15 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 15:41:15.978 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:41:15 PM'.
2025-09-25 15:41:15.986 +03:00 [INF] Incomming Request: GET /api/Books/1/Authors/1
2025-09-25 15:41:15.992 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-25 15:41:15.996 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-25 15:41:16.004 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 15:41:16.010 +03:00 [INF] Generating expiration headers.
2025-09-25 15:41:16.015 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 12:42:16 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 15:41:16.022 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 15:41:16.042 +03:00 [INF] Generating Vary header.
2025-09-25 15:41:16.047 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 15:41:16.062 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Books/1/Authors/1 - 405 0 null 259.4454ms
2025-09-25 15:41:35.780 +03:00 [INF] Starting database seeding.
2025-09-25 15:41:36.255 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 15:41:40.291 +03:00 [INF] Executed DbCommand (136ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:41:40.544 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:41:40.557 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:41:40.605 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 15:41:40.764 +03:00 [INF] Database seeding finished successfully.
2025-09-25 15:41:41.919 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 15:41:41.925 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 15:41:42.185 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 15:41:42.189 +03:00 [INF] Hosting environment: Development
2025-09-25 15:41:42.191 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 15:41:42.384 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Books/1/Authors/1 - application/json-patch+json null
2025-09-25 15:41:42.674 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Books/1/Authors/1 - 307 0 null 302.4342ms
2025-09-25 15:41:42.821 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7266/api/Books/1/Authors/1 - application/json-patch+json null
2025-09-25 15:41:42.916 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 15:41:42.928 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-25 15:41:42.934 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 15:41:42.941 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 15:41:42.949 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 15:41:42.974 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 15:41:43.354 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:41:43 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 15:41:43.488 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:41:43 PM'.
2025-09-25 15:41:43.501 +03:00 [INF] Incomming Request: GET /api/Books/1/Authors/1
2025-09-25 15:41:43.508 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-25 15:41:43.512 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-25 15:41:43.589 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 15:41:43.599 +03:00 [INF] Generating expiration headers.
2025-09-25 15:41:43.780 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 12:42:43 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 15:41:43.788 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 15:41:43.800 +03:00 [INF] Generating Vary header.
2025-09-25 15:41:43.803 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 15:41:43.810 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7266/api/Books/1/Authors/1 - 405 null application/problem+json 989.9577ms
2025-09-25 15:41:52.630 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/1 - application/json-patch+json 0
2025-09-25 15:41:52.676 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/1 - 307 0 null 46.1388ms
2025-09-25 15:41:52.688 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/1 - application/json-patch+json 0
2025-09-25 15:41:52.719 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 15:41:52.724 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 15:41:52.728 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 15:41:52.733 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 15:41:52.738 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 15:41:52.743 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 15:41:52.752 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:41:52 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 15:41:52.778 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:41:52 PM'.
2025-09-25 15:41:52.809 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 15:41:52.819 +03:00 [INF] Incomming Request: POST /api/Books/1/Authors/1
2025-09-25 15:41:52.825 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 15:41:52.910 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 15:41:53.450 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 15:41:54.099 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId]
2025-09-25 15:41:54.290 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 15:41:54.730 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 15:41:54.791 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-09-25 15:41:54.808 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 1875.0069ms
2025-09-25 15:41:54.821 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 15:41:54.837 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 15:41:54.852 +03:00 [INF] Generating expiration headers.
2025-09-25 15:41:54.859 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 12:42:54 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 15:41:54.895 +03:00 [INF] Generating Validation headers.
2025-09-25 15:41:54.958 +03:00 [INF] Validation headers generated. ETag: Strong, "B43254E8E7EF5C5A334F07F87854C68B". Last-Modified: Thu, 25 Sep 2025 12:41:54 GMT
2025-09-25 15:41:54.969 +03:00 [INF] Generating Vary header.
2025-09-25 15:41:54.977 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 15:41:55.009 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/1 - 200 null text/plain; charset=utf-8 2321.1239ms
2025-09-25 15:49:28.144 +03:00 [INF] Starting database seeding.
2025-09-25 15:49:28.592 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 15:49:33.019 +03:00 [INF] Executed DbCommand (128ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:49:33.402 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:49:33.422 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 15:49:33.517 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 15:49:33.730 +03:00 [INF] Database seeding finished successfully.
2025-09-25 15:49:34.667 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 15:49:34.669 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 15:49:35.003 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/1 - application/json-patch+json 0
2025-09-25 15:49:35.098 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 15:49:35.102 +03:00 [INF] Hosting environment: Development
2025-09-25 15:49:35.104 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 15:49:35.234 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/1 - 307 0 null 257.7506ms
2025-09-25 15:49:35.328 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/1 - application/json-patch+json 0
2025-09-25 15:49:35.376 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 15:49:35.394 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 15:49:35.397 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 15:49:35.406 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 15:49:35.410 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 15:49:35.414 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 15:49:35.885 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:49:35 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 15:49:35.928 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 12:49:35 PM'.
2025-09-25 15:49:35.950 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 15:49:35.959 +03:00 [INF] Incomming Request: POST /api/Books/1/Authors/1
2025-09-25 15:49:35.965 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 15:49:36.035 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 15:49:36.494 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 15:49:37.070 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId]
2025-09-25 15:49:37.270 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 16:00:14.552 +03:00 [INF] Starting database seeding.
2025-09-25 16:00:15.050 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 16:00:19.720 +03:00 [INF] Executed DbCommand (146ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 16:00:19.961 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 16:00:19.974 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 16:00:20.040 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 16:00:20.197 +03:00 [INF] Database seeding finished successfully.
2025-09-25 16:00:21.329 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 16:00:21.331 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 16:00:21.511 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 16:00:21.514 +03:00 [INF] Hosting environment: Development
2025-09-25 16:00:21.517 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 16:00:26.132 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/2 - application/json-patch+json 0
2025-09-25 16:00:26.289 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/2 - 307 0 null 163.2861ms
2025-09-25 16:00:26.439 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/2 - application/json-patch+json 0
2025-09-25 16:00:26.472 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 16:00:26.475 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 16:00:26.477 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 16:00:26.483 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 16:00:26.485 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 16:00:26.488 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 16:00:26.728 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 1:00:26 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 16:00:26.757 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 1:00:26 PM'.
2025-09-25 16:00:26.774 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 16:00:26.784 +03:00 [INF] Incomming Request: POST /api/Books/1/Authors/2
2025-09-25 16:00:26.790 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 16:00:26.828 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 16:00:27.172 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 16:00:27.376 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 16:00:27.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId]
2025-09-25 16:02:07.094 +03:00 [INF] Starting database seeding.
2025-09-25 16:02:07.766 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 16:02:10.680 +03:00 [INF] Executed DbCommand (126ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 16:02:10.893 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 16:02:10.901 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 16:02:10.924 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 16:02:10.986 +03:00 [INF] Database seeding finished successfully.
2025-09-25 16:02:11.808 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 16:02:11.813 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 16:02:12.401 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 16:02:12.409 +03:00 [INF] Hosting environment: Development
2025-09-25 16:02:12.418 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 16:02:18.280 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/2 - application/json-patch+json 0
2025-09-25 16:02:18.497 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/2 - 307 0 null 237.1146ms
2025-09-25 16:02:18.640 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/2 - application/json-patch+json 0
2025-09-25 16:02:18.710 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 16:02:18.714 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 16:02:18.721 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 16:02:18.729 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 16:02:18.734 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 16:02:18.740 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 16:02:19.164 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 1:02:19 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 16:02:19.222 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 1:02:19 PM'.
2025-09-25 16:02:19.260 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 16:02:19.276 +03:00 [INF] Incomming Request: POST /api/Books/1/Authors/2
2025-09-25 16:02:19.286 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 16:02:19.353 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 16:02:19.844 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 16:02:20.076 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 16:02:20.511 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId]
2025-09-25 16:03:02.177 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 17:07:59.281 +03:00 [INF] Starting database seeding.
2025-09-25 17:07:59.967 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 17:08:02.539 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:08:02.643 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:08:02.650 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:08:02.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 17:08:02.756 +03:00 [INF] Database seeding finished successfully.
2025-09-25 17:08:04.228 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 17:08:04.235 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 17:08:04.583 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 17:08:04.587 +03:00 [INF] Hosting environment: Development
2025-09-25 17:08:04.592 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 17:08:10.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/2 - application/json-patch+json 0
2025-09-25 17:08:10.362 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/2 - 307 0 null 218.5547ms
2025-09-25 17:08:10.483 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/2 - application/json-patch+json 0
2025-09-25 17:08:10.537 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:08:10.542 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:08:10.548 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:08:10.556 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:08:10.559 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:08:10.565 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:08:10.923 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:08:10 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:08:10.994 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:08:10 PM'.
2025-09-25 17:08:11.035 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:08:11.056 +03:00 [INF] Incomming Request: POST /api/Books/1/Authors/2
2025-09-25 17:08:11.069 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:08:11.135 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:08:11.609 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:08:11.869 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:08:12.548 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:08:12.826 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 17:08:12.850 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 1692.9875ms
2025-09-25 17:08:12.860 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:08:12.868 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 17:08:12.880 +03:00 [INF] Generating expiration headers.
2025-09-25 17:08:12.892 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 14:09:12 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 17:08:12.902 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 17:08:12.907 +03:00 [INF] Generating Vary header.
2025-09-25 17:08:12.913 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 17:08:12.936 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/2 - 400 null text/plain; charset=utf-8 2453.6905ms
2025-09-25 17:08:25.364 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/2 - application/json-patch+json 0
2025-09-25 17:08:25.411 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/2 - 307 0 null 48.5877ms
2025-09-25 17:08:25.430 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/2 - application/json-patch+json 0
2025-09-25 17:08:25.464 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:08:25.471 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:08:25.480 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:08:25.490 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:08:25.500 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:08:25.512 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:08:25.522 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:08:25 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:08:25.540 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:08:25 PM'.
2025-09-25 17:08:25.545 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:08:25.549 +03:00 [INF] Incomming Request: POST /api/Books/1/Authors/2
2025-09-25 17:08:25.552 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:08:25.557 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:08:25.571 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:08:25.603 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:08:25.616 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:08:25.640 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 17:08:25.645 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 79.3803ms
2025-09-25 17:08:25.650 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:08:25.656 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 17:08:25.659 +03:00 [INF] Generating expiration headers.
2025-09-25 17:08:25.662 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 14:09:25 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 17:08:25.666 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 17:08:25.668 +03:00 [INF] Generating Vary header.
2025-09-25 17:08:25.673 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 17:08:25.677 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/2 - 400 null text/plain; charset=utf-8 247.2818ms
2025-09-25 17:09:57.154 +03:00 [INF] Starting database seeding.
2025-09-25 17:09:57.767 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 17:10:01.185 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:10:01.294 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:10:01.301 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:10:01.324 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 17:10:01.411 +03:00 [INF] Database seeding finished successfully.
2025-09-25 17:10:02.164 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 17:10:02.170 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 17:10:02.442 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 17:10:02.450 +03:00 [INF] Hosting environment: Development
2025-09-25 17:10:02.459 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 17:10:35.258 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/3 - application/json-patch+json 0
2025-09-25 17:10:35.430 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/3 - 307 0 null 186.9113ms
2025-09-25 17:10:35.531 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/3 - application/json-patch+json 0
2025-09-25 17:10:35.578 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:10:35.581 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:10:35.589 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:10:35.599 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:10:35.602 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:10:35.606 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:10:35.901 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:10:35 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:10:35.958 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:10:35 PM'.
2025-09-25 17:10:35.991 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:10:36.010 +03:00 [INF] Incomming Request: POST /api/Books/1/Authors/3
2025-09-25 17:10:36.020 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:10:36.096 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:10:36.595 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:10:36.959 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:10:37.434 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:10:38.233 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 17:11:33.167 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 57045.502ms
2025-09-25 17:11:33.228 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:11:40.560 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method553(Closure, Author)
   at System.Linq.Enumerable.ListSelectIterator`2.MoveNext()
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 238
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:11:40.690 +03:00 [ERR] An unhandled exception occurred: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method553(Closure, Author)
   at System.Linq.Enumerable.ListSelectIterator`2.MoveNext()
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 238
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:11:40.848 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/3 - 500 null application/problem+json 65316.9298ms
2025-09-25 17:20:42.300 +03:00 [INF] Starting database seeding.
2025-09-25 17:20:42.908 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 17:20:46.694 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:20:46.789 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:20:46.798 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:20:46.820 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 17:20:46.916 +03:00 [INF] Database seeding finished successfully.
2025-09-25 17:20:47.932 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 17:20:47.940 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 17:20:48.305 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 17:20:48.307 +03:00 [INF] Hosting environment: Development
2025-09-25 17:20:48.310 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 17:23:12.236 +03:00 [INF] Starting database seeding.
2025-09-25 17:23:14.311 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 17:23:20.569 +03:00 [INF] Executed DbCommand (248ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:23:20.772 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:23:20.783 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:23:20.824 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 17:23:20.953 +03:00 [INF] Database seeding finished successfully.
2025-09-25 17:23:23.000 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 17:23:23.004 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 17:23:23.413 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 17:23:23.420 +03:00 [INF] Hosting environment: Development
2025-09-25 17:23:23.428 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 17:23:27.615 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/4 - application/json-patch+json 0
2025-09-25 17:23:27.794 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/1/Authors/4 - 307 0 null 194.4959ms
2025-09-25 17:23:27.876 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/4 - application/json-patch+json 0
2025-09-25 17:23:27.922 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:23:27.927 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:23:27.933 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:23:27.944 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:23:27.950 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:23:27.960 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:23:33.450 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:23:33 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:23:33.504 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:23:33 PM'.
2025-09-25 17:23:33.525 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:23:33.534 +03:00 [INF] Incomming Request: POST /api/Books/1/Authors/4
2025-09-25 17:23:33.540 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:23:33.578 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:23:34.002 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:23:34.241 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:23:48.863 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 15262.2166ms
2025-09-25 17:23:48.880 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:23:51.664 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: Author with id 4 not found.
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 227
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:23:51.906 +03:00 [WRN] A Not Found exception has occured: Author with id 4 not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: Author with id 4 not found.
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 227
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:23:52.225 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/1/Authors/4 - 404 null application/problem+json 24349.6018ms
2025-09-25 17:24:07.610 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/2/Authors/4 - application/json-patch+json 0
2025-09-25 17:24:07.648 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/2/Authors/4 - 307 0 null 38.1808ms
2025-09-25 17:24:07.660 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/2/Authors/4 - application/json-patch+json 0
2025-09-25 17:24:07.697 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:24:07.703 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:24:07.712 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:24:07.719 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:24:07.730 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:24:07.735 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:24:07.744 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:24:07 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:24:07.761 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:24:07 PM'.
2025-09-25 17:24:07.766 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:24:07.770 +03:00 [INF] Incomming Request: POST /api/Books/2/Authors/4
2025-09-25 17:24:07.775 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:24:07.779 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:24:07.801 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:24:07.828 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:24:14.384 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 6587.7054ms
2025-09-25 17:24:14.408 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:24:19.375 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: Author with id 4 not found.
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 227
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:24:19.473 +03:00 [WRN] A Not Found exception has occured: Author with id 4 not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: Author with id 4 not found.
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 227
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:24:19.532 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/2/Authors/4 - 404 null application/problem+json 11872.3664ms
2025-09-25 17:25:01.118 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/10/Authors/1 - application/json-patch+json 0
2025-09-25 17:25:01.132 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/10/Authors/1 - 307 0 null 14.9619ms
2025-09-25 17:25:01.140 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/10/Authors/1 - application/json-patch+json 0
2025-09-25 17:25:01.159 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:25:01.160 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:25:01.163 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:25:01.166 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:25:01.168 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:25:01.172 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:25:01.179 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:25:01 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:25:01.193 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:25:01 PM'.
2025-09-25 17:25:01.197 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:25:01.202 +03:00 [INF] Incomming Request: POST /api/Books/10/Authors/1
2025-09-25 17:25:01.205 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:25:01.210 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:25:01.227 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:25:01.234 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:25:01.474 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:25:01.604 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 17:25:01.617 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 399.9232ms
2025-09-25 17:25:01.624 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:25:01.632 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 17:25:01.643 +03:00 [INF] Generating expiration headers.
2025-09-25 17:25:01.650 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 14:26:01 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 17:25:01.664 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 17:25:01.669 +03:00 [INF] Generating Vary header.
2025-09-25 17:25:01.678 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 17:25:01.685 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/10/Authors/1 - 400 null text/plain; charset=utf-8 548.7922ms
2025-09-25 17:26:19.774 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/6/Authors/6 - application/json-patch+json 0
2025-09-25 17:26:19.792 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/6/Authors/6 - 307 0 null 17.8886ms
2025-09-25 17:26:19.794 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/6/Authors/6 - application/json-patch+json 0
2025-09-25 17:26:19.806 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:26:19.808 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:26:19.810 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:26:19.813 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:26:19.816 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:26:19.819 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:26:19.822 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:26:19 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:26:19.836 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:26:19 PM'.
2025-09-25 17:26:19.841 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:26:19.845 +03:00 [INF] Incomming Request: POST /api/Books/6/Authors/6
2025-09-25 17:26:19.849 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:26:19.854 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:26:19.861 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:26:19.868 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:26:25.989 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 6128.7313ms
2025-09-25 17:26:26.006 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:26:28.684 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: Author with id 6 not found.
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 227
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:26:28.850 +03:00 [WRN] A Not Found exception has occured: Author with id 6 not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: Author with id 6 not found.
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 227
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:26:28.899 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/6/Authors/6 - 404 null application/problem+json 9104.5675ms
2025-09-25 17:26:41.548 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/6/Authors/1 - application/json-patch+json 0
2025-09-25 17:26:41.573 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/6/Authors/1 - 307 0 null 24.9797ms
2025-09-25 17:26:41.579 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/6/Authors/1 - application/json-patch+json 0
2025-09-25 17:26:41.614 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:26:41.618 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:26:41.623 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:26:41.628 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:26:41.632 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:26:41.636 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:26:41.643 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:26:41 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:26:41.666 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:26:41 PM'.
2025-09-25 17:26:41.674 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:26:41.680 +03:00 [INF] Incomming Request: POST /api/Books/6/Authors/1
2025-09-25 17:26:41.685 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:26:41.693 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:26:41.706 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:26:41.714 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:26:41.752 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:26:42.023 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 17:29:37.685 +03:00 [INF] Starting database seeding.
2025-09-25 17:29:38.619 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 17:29:42.345 +03:00 [INF] Executed DbCommand (123ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:29:42.700 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:29:42.718 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:29:42.765 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 17:29:42.836 +03:00 [INF] Database seeding finished successfully.
2025-09-25 17:29:43.611 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 17:29:43.614 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 17:29:44.001 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 17:29:44.004 +03:00 [INF] Hosting environment: Development
2025-09-25 17:29:44.007 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 17:29:45.686 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/6/Authors/2 - application/json-patch+json 0
2025-09-25 17:29:45.868 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/6/Authors/2 - 307 0 null 194.4309ms
2025-09-25 17:29:45.999 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/6/Authors/2 - application/json-patch+json 0
2025-09-25 17:29:46.043 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:29:46.047 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:29:46.052 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:29:46.060 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:29:46.063 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:29:46.068 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:29:46.491 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:29:46 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:29:46.590 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:29:46 PM'.
2025-09-25 17:29:46.617 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:29:46.630 +03:00 [INF] Incomming Request: POST /api/Books/6/Authors/2
2025-09-25 17:29:46.639 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:29:46.706 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:29:47.187 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:29:47.415 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:29:47.906 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:29:48.791 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 17:31:31.717 +03:00 [INF] Starting database seeding.
2025-09-25 17:31:32.242 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 17:31:35.550 +03:00 [INF] Executed DbCommand (115ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:31:35.798 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:31:35.811 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:31:35.835 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 17:31:35.898 +03:00 [INF] Database seeding finished successfully.
2025-09-25 17:31:36.433 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 17:31:36.437 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 17:31:36.905 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 17:31:36.912 +03:00 [INF] Hosting environment: Development
2025-09-25 17:31:36.924 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 17:31:42.886 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/6/Authors/3 - application/json-patch+json 0
2025-09-25 17:31:43.124 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/6/Authors/3 - 307 0 null 264.0386ms
2025-09-25 17:31:43.231 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/6/Authors/3 - application/json-patch+json 0
2025-09-25 17:31:43.275 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:31:43.279 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:31:43.285 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:31:43.294 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:31:43.298 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:31:43.304 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:31:43.751 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:31:43 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:31:43.818 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:31:43 PM'.
2025-09-25 17:31:43.838 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:31:43.851 +03:00 [INF] Incomming Request: POST /api/Books/6/Authors/3
2025-09-25 17:31:44.065 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:31:44.127 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:31:44.591 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:31:44.820 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:31:45.443 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:31:46.099 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 17:34:18.315 +03:00 [INF] Starting database seeding.
2025-09-25 17:34:18.996 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 17:34:22.673 +03:00 [INF] Executed DbCommand (177ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:34:22.974 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:34:22.998 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:34:23.066 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 17:34:23.227 +03:00 [INF] Database seeding finished successfully.
2025-09-25 17:34:24.470 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 17:34:24.476 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 17:34:24.855 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 17:34:24.864 +03:00 [INF] Hosting environment: Development
2025-09-25 17:34:24.872 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 17:34:47.138 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/1 - application/json-patch+json 0
2025-09-25 17:34:47.365 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/1 - 307 0 null 243.9224ms
2025-09-25 17:34:47.466 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/1 - application/json-patch+json 0
2025-09-25 17:34:47.506 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:34:47.510 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:34:47.514 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:34:47.522 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:34:47.526 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:34:47.530 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:34:47.910 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:34:47 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:34:48.016 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:34:47 PM'.
2025-09-25 17:34:48.068 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:34:48.098 +03:00 [INF] Incomming Request: POST /api/Books/7/Authors/1
2025-09-25 17:34:48.106 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:34:48.160 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:35:52.364 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:35:52.568 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:35:54.926 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:35:55.319 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 17:37:24.548 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 156369.8579ms
2025-09-25 17:37:24.559 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:37:33.845 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method553(Closure, Author)
   at System.Linq.Enumerable.ListSelectIterator`2.MoveNext()
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 238
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:37:35.391 +03:00 [ERR] An unhandled exception occurred: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method553(Closure, Author)
   at System.Linq.Enumerable.ListSelectIterator`2.MoveNext()
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 238
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:37:50.376 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/1 - 500 null application/problem+json 182910.3522ms
2025-09-25 17:38:08.949 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/2 - application/json-patch+json 0
2025-09-25 17:38:08.974 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/2 - 307 0 null 24.6839ms
2025-09-25 17:38:08.979 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/2 - application/json-patch+json 0
2025-09-25 17:38:08.996 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:38:08.999 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:38:09.002 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:38:09.006 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:38:09.010 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:38:09.015 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:38:09.020 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:38:09 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:38:09.036 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:38:09 PM'.
2025-09-25 17:38:09.040 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:38:09.045 +03:00 [INF] Incomming Request: POST /api/Books/7/Authors/2
2025-09-25 17:38:09.050 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:38:09.053 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:38:09.066 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:38:09.093 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:38:09.106 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:38:09.133 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 17:38:19.000 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 9938.4322ms
2025-09-25 17:38:19.016 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:38:22.880 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method553(Closure, Author)
   at System.Linq.Enumerable.ListSelectIterator`2.MoveNext()
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 238
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:38:23.112 +03:00 [ERR] An unhandled exception occurred: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method553(Closure, Author)
   at System.Linq.Enumerable.ListSelectIterator`2.MoveNext()
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 238
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:38:23.217 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/2 - 500 null application/problem+json 14237.9129ms
2025-09-25 17:39:41.349 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/2 - application/json-patch+json 0
2025-09-25 17:39:41.406 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/2 - 307 0 null 57.7269ms
2025-09-25 17:39:41.409 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/2 - application/json-patch+json 0
2025-09-25 17:39:41.427 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:39:41.431 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:39:41.434 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:39:41.437 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:39:41.440 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:39:41.442 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:39:41.448 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:39:41 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:39:41.466 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:39:41 PM'.
2025-09-25 17:39:41.470 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:39:41.475 +03:00 [INF] Incomming Request: POST /api/Books/7/Authors/2
2025-09-25 17:39:41.477 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:39:41.482 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:39:41.497 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:39:41.503 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:39:41.514 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:39:41.539 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 17:39:41.546 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 59.3388ms
2025-09-25 17:39:41.552 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:39:41.554 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 17:39:41.561 +03:00 [INF] Generating expiration headers.
2025-09-25 17:39:41.564 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 14:40:41 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 17:39:41.570 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 17:39:41.573 +03:00 [INF] Generating Vary header.
2025-09-25 17:39:41.577 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 17:39:41.581 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/2 - 400 null text/plain; charset=utf-8 172.0413ms
2025-09-25 17:39:59.272 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/3 - application/json-patch+json 0
2025-09-25 17:39:59.281 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/3 - 307 0 null 8.8668ms
2025-09-25 17:39:59.283 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/3 - application/json-patch+json 0
2025-09-25 17:39:59.296 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:39:59.299 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:39:59.301 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:39:59.303 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:39:59.306 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:39:59.309 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:39:59.313 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:39:59 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:39:59.327 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:39:59 PM'.
2025-09-25 17:39:59.330 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:39:59.333 +03:00 [INF] Incomming Request: POST /api/Books/7/Authors/3
2025-09-25 17:39:59.335 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:39:59.338 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:39:59.346 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:39:59.351 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:39:59.361 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:39:59.377 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 17:40:09.732 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 10386.2648ms
2025-09-25 17:40:09.738 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:40:14.920 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method553(Closure, Author)
   at System.Linq.Enumerable.ListSelectIterator`2.MoveNext()
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 238
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:40:15.007 +03:00 [ERR] An unhandled exception occurred: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Type Map configuration:
Book -> BookDetailsDto
LibraryManagementSystem.DataAccess.Entities.Book -> LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto

Destination Member:
AuthorNames

 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method553(Closure, Author)
   at System.Linq.Enumerable.ListSelectIterator`2.MoveNext()
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method552(Closure, Object, BookDetailsDto, ResolutionContext)
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 238
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 279
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 17:40:15.117 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/3 - 500 null application/problem+json 15833.7479ms
2025-09-25 17:40:36.596 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/3 - application/json-patch+json 1774
2025-09-25 17:40:36.807 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/3 - application/json-patch+json 1774
2025-09-25 17:40:36.815 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/3 - 307 0 null 219.0765ms
2025-09-25 17:40:36.821 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/3 - application/json-patch+json 1774
2025-09-25 17:40:36.824 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/3 - 307 0 null 16.7925ms
2025-09-25 17:40:36.856 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:40:36.861 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/3 - application/json-patch+json 1774
2025-09-25 17:40:36.869 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:40:36.879 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:40:36.881 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:40:36.885 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:40:36.888 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:40:36.892 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:40:36.896 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:40:36.899 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:40:36.902 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:40:36.907 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:40:36.934 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:40:36 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:40:36.936 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:40:36.958 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:40:36 PM'.
2025-09-25 17:40:36.966 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:40:36 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:40:36.971 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:40:36.994 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:40:36 PM'.
2025-09-25 17:40:37.000 +03:00 [INF] Incomming Request: POST /api/Books/7/Authors/3
2025-09-25 17:40:37.006 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:40:37.010 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:40:37.018 +03:00 [INF] Incomming Request: POST /api/Books/7/Authors/3
2025-09-25 17:40:37.022 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:40:37.027 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:40:37.038 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:40:37.042 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:40:37.054 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:40:37.056 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:40:37.071 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:40:37.110 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 17:40:37.116 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId]
FROM [Authors] AS [a]
WHERE [a].[Id] = @__id_0
2025-09-25 17:40:37.119 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 82.1427ms
2025-09-25 17:40:37.139 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:40:37.141 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:40:37.144 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 17:40:37.168 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 17:40:37.169 +03:00 [INF] Generating expiration headers.
2025-09-25 17:40:37.173 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 117.6544ms
2025-09-25 17:40:37.176 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 14:41:37 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 17:40:37.181 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:40:37.185 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 17:40:37.190 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 17:40:37.193 +03:00 [INF] Generating Vary header.
2025-09-25 17:40:37.196 +03:00 [INF] Generating expiration headers.
2025-09-25 17:40:37.199 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 17:40:37.202 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 14:41:37 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 17:40:37.206 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/3 - 400 null text/plain; charset=utf-8 385.1389ms
2025-09-25 17:40:37.209 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 17:40:37.220 +03:00 [INF] Generating Vary header.
2025-09-25 17:40:37.223 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 17:40:37.230 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/3 - 400 null text/plain; charset=utf-8 368.892ms
2025-09-25 17:45:08.995 +03:00 [INF] Starting database seeding.
2025-09-25 17:45:09.664 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 17:45:14.188 +03:00 [INF] Executed DbCommand (106ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:45:14.338 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:45:14.346 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:45:14.380 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 17:45:14.452 +03:00 [INF] Database seeding finished successfully.
2025-09-25 17:45:15.266 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 17:45:15.271 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 17:45:15.585 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 17:45:15.590 +03:00 [INF] Hosting environment: Development
2025-09-25 17:45:15.595 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 17:45:17.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/9/Authors/3 - application/json-patch+json 0
2025-09-25 17:45:17.761 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/9/Authors/3 - 307 0 null 184.6654ms
2025-09-25 17:45:17.839 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/9/Authors/3 - application/json-patch+json 0
2025-09-25 17:45:17.875 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:45:17.880 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:45:17.884 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:45:17.893 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:45:17.897 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:45:17.902 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:45:18.137 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:45:18 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:45:18.174 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:45:18 PM'.
2025-09-25 17:45:18.193 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:45:18.204 +03:00 [INF] Incomming Request: POST /api/Books/9/Authors/3
2025-09-25 17:45:18.211 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:45:18.263 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:45:27.483 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 17:45:27.875 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 17:45:30.063 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 17:45:30.466 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 17:45:30.529 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto'.
2025-09-25 17:45:30.592 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 12314.6149ms
2025-09-25 17:45:30.599 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 17:45:30.607 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 17:45:34.654 +03:00 [INF] Generating expiration headers.
2025-09-25 17:45:34.666 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 14:46:34 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 17:45:34.682 +03:00 [INF] Generating Validation headers.
2025-09-25 17:45:34.739 +03:00 [INF] Validation headers generated. ETag: Strong, "9BB22F5FD895D8C3521095EAFBC6A7A6". Last-Modified: Thu, 25 Sep 2025 14:45:34 GMT
2025-09-25 17:45:34.747 +03:00 [INF] Generating Vary header.
2025-09-25 17:45:34.758 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 17:45:34.788 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/9/Authors/3 - 201 null application/json; charset=utf-8 16949.0039ms
2025-09-25 17:47:20.257 +03:00 [INF] Starting database seeding.
2025-09-25 17:47:20.912 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 17:47:25.064 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:47:25.156 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:47:25.163 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 17:47:25.180 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 17:47:25.228 +03:00 [INF] Database seeding finished successfully.
2025-09-25 17:47:25.731 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 17:47:25.734 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 17:47:26.032 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 17:47:26.034 +03:00 [INF] Hosting environment: Development
2025-09-25 17:47:26.037 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 17:48:14.358 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Books/11 - application/json-patch+json null
2025-09-25 17:48:14.629 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Books/11 - 307 0 null 277.4631ms
2025-09-25 17:48:14.733 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Books/11 - application/json-patch+json null
2025-09-25 17:48:14.783 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:48:14.787 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:48:14.791 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:48:14.803 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:48:14.807 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:48:14.813 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:48:15.182 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:48:15 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:48:15.255 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:48:15 PM'.
2025-09-25 17:48:15.294 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:48:15.308 +03:00 [INF] Incomming Request: DELETE /api/Books/11
2025-09-25 17:48:15.316 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 17:48:15.394 +03:00 [INF] Route matched with {action = "Delete", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:48:15.964 +03:00 [INF] Executing an action Delete on controller Books.
2025-09-25 17:48:16.507 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN [Borrowings] AS [b0] ON [b1].[Id] = [b0].[BookId]
ORDER BY [b1].[Id]
2025-09-25 17:48:16.969 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Books]
OUTPUT 1
WHERE [Id] = @p0;
2025-09-25 17:48:17.049 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 17:48:17.207 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API) in 1787.853ms
2025-09-25 17:48:17.242 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 17:48:17.253 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 17:48:17.265 +03:00 [INF] Generating expiration headers.
2025-09-25 17:48:17.271 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 14:49:17 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 17:48:17.279 +03:00 [INF] Generating Validation headers.
2025-09-25 17:48:17.336 +03:00 [INF] Validation headers generated. ETag: Strong, "35C83CC7E28BA840B25B9E1BF247A9BB". Last-Modified: Thu, 25 Sep 2025 14:48:17 GMT
2025-09-25 17:48:17.484 +03:00 [INF] Generating Vary header.
2025-09-25 17:48:17.488 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 17:48:17.510 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Books/11 - 204 null null 2777.5769ms
2025-09-25 17:58:53.511 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Books/10 - null null
2025-09-25 17:58:53.543 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Books/10 - 307 0 null 70.5695ms
2025-09-25 17:58:53.553 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Books/10 - null null
2025-09-25 17:58:53.585 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:58:53.590 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:58:53.601 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:58:53.610 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:58:53.616 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:58:53.623 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:58:53.639 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:58:53 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-25 17:58:53.682 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/25/2025 9:25:57 AM', Current time (UTC): '9/25/2025 2:58:53 PM'.
2025-09-25 17:58:53.699 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:58:53.712 +03:00 [INF] Incomming Request: DELETE /api/Books/10
2025-09-25 17:58:53.722 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 17:58:53.745 +03:00 [INF] Route matched with {action = "Delete", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:58:53.803 +03:00 [INF] Executing an action Delete on controller Books.
2025-09-25 17:58:53.895 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN [Borrowings] AS [b0] ON [b1].[Id] = [b0].[BookId]
ORDER BY [b1].[Id]
2025-09-25 17:58:53.941 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Books]
OUTPUT 1
WHERE [Id] = @p0;
2025-09-25 17:58:53.965 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 17:58:53.973 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API) in 188.5153ms
2025-09-25 17:58:53.986 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 17:58:53.997 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 17:58:54.009 +03:00 [INF] Generating expiration headers.
2025-09-25 17:58:54.018 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 14:59:54 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 17:58:54.029 +03:00 [INF] Generating Validation headers.
2025-09-25 17:58:54.041 +03:00 [INF] Validation headers generated. ETag: Strong, "4D7BEE29D889215C83FA6C1208666910". Last-Modified: Thu, 25 Sep 2025 14:58:54 GMT
2025-09-25 17:58:54.054 +03:00 [INF] Generating Vary header.
2025-09-25 17:58:54.066 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 17:58:54.076 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Books/10 - 204 null null 523.2989ms
2025-09-25 17:59:17.140 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Books/9 - null null
2025-09-25 17:59:17.156 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Books/9 - 307 0 null 17.1ms
2025-09-25 17:59:17.167 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Books/9 - null null
2025-09-25 17:59:17.188 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 17:59:17.191 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 17:59:17.195 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 17:59:17.197 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 17:59:17.200 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 17:59:17.204 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 17:59:17.213 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 17:59:17.222 +03:00 [INF] Incomming Request: DELETE /api/Books/9
2025-09-25 17:59:17.225 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 17:59:17.230 +03:00 [INF] Route matched with {action = "Delete", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 17:59:17.257 +03:00 [INF] Executing an action Delete on controller Books.
2025-09-25 17:59:17.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN [Borrowings] AS [b0] ON [b1].[Id] = [b0].[BookId]
ORDER BY [b1].[Id]
2025-09-25 17:59:17.279 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Books]
OUTPUT 1
WHERE [Id] = @p0;
2025-09-25 17:59:17.291 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 17:59:17.295 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API) in 55.8492ms
2025-09-25 17:59:17.300 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 17:59:17.305 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 17:59:17.309 +03:00 [INF] Generating expiration headers.
2025-09-25 17:59:17.311 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 15:00:17 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 17:59:17.314 +03:00 [INF] Generating Validation headers.
2025-09-25 17:59:17.317 +03:00 [INF] Validation headers generated. ETag: Strong, "040EA94F29062E9D0E504CF73B2567FC". Last-Modified: Thu, 25 Sep 2025 14:59:17 GMT
2025-09-25 17:59:17.320 +03:00 [INF] Generating Vary header.
2025-09-25 17:59:17.323 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 17:59:17.328 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Books/9 - 204 null null 162.5968ms
2025-09-25 18:00:36.663 +03:00 [INF] Starting database seeding.
2025-09-25 18:00:37.546 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 18:00:41.939 +03:00 [INF] Executed DbCommand (135ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 18:00:42.117 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 18:00:42.127 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 18:00:42.182 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 18:00:42.421 +03:00 [INF] Database seeding finished successfully.
2025-09-25 18:00:43.592 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 18:00:43.594 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 18:00:43.784 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 18:00:43.790 +03:00 [INF] Hosting environment: Development
2025-09-25 18:00:43.796 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 18:00:43.999 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Books/9 - null null
2025-09-25 18:00:44.196 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Books/9 - 307 0 null 213.7821ms
2025-09-25 18:00:44.296 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Books/9 - null null
2025-09-25 18:00:44.378 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 18:00:44.383 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 18:00:44.387 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 18:00:44.397 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 18:00:44.400 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 18:00:44.405 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 18:00:44.722 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 18:00:44.736 +03:00 [INF] Incomming Request: DELETE /api/Books/9
2025-09-25 18:00:44.744 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 18:00:44.834 +03:00 [INF] Route matched with {action = "Delete", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 18:00:45.323 +03:00 [INF] Executing an action Delete on controller Books.
2025-09-25 18:00:45.863 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN [Borrowings] AS [b0] ON [b1].[Id] = [b0].[BookId]
ORDER BY [b1].[Id]
2025-09-25 18:01:06.767 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API) in 21905.4996ms
2025-09-25 18:01:06.796 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 18:01:10.252 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: Book with id 9 not found.
   at LibraryManagementSystem.Business.Services.BookService.ThrowNotFoundExceptionIfBookNotExist(Int32 id, Book book) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 307
   at LibraryManagementSystem.Business.Services.BookService.DeleteAsync(Int32 id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 160
   at LibraryManagementSystem.API.Controllers.BooksController.Delete(Int32 id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 304
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 18:01:10.535 +03:00 [WRN] A Not Found exception has occured: Book with id 9 not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: Book with id 9 not found.
   at LibraryManagementSystem.Business.Services.BookService.ThrowNotFoundExceptionIfBookNotExist(Int32 id, Book book) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 307
   at LibraryManagementSystem.Business.Services.BookService.DeleteAsync(Int32 id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 160
   at LibraryManagementSystem.API.Controllers.BooksController.Delete(Int32 id) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Controllers\BooksController.cs:line 304
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\RequestLoggingHandler.cs:line 24
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API\Middlewares\CustomAuthorizationHandler.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 18:01:10.892 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Books/9 - 404 null application/problem+json 26595.2276ms
2025-09-25 18:01:15.915 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Books/8 - null null
2025-09-25 18:01:15.929 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Books/8 - 307 0 null 13.6167ms
2025-09-25 18:01:15.934 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Books/8 - null null
2025-09-25 18:01:15.950 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 18:01:15.955 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 18:01:15.958 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 18:01:15.961 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 18:01:15.963 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 18:01:15.967 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 18:01:15.971 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 18:01:27.030 +03:00 [INF] Incomming Request: DELETE /api/Books/8
2025-09-25 18:01:27.039 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 18:01:27.045 +03:00 [INF] Route matched with {action = "Delete", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 18:01:27.060 +03:00 [INF] Executing an action Delete on controller Books.
2025-09-25 18:01:27.093 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN [Borrowings] AS [b0] ON [b1].[Id] = [b0].[BookId]
ORDER BY [b1].[Id]
2025-09-25 18:01:27.645 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Books]
OUTPUT 1
WHERE [Id] = @p0;
2025-09-25 18:01:27.849 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 18:01:27.856 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API) in 803.2354ms
2025-09-25 18:01:27.861 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 18:01:27.868 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 18:01:27.881 +03:00 [INF] Generating expiration headers.
2025-09-25 18:01:27.892 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 15:02:27 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 18:01:27.901 +03:00 [INF] Generating Validation headers.
2025-09-25 18:01:27.943 +03:00 [INF] Validation headers generated. ETag: Strong, "7DEDBCD5F81CA20942AD985FAD4905FE". Last-Modified: Thu, 25 Sep 2025 15:01:27 GMT
2025-09-25 18:01:27.949 +03:00 [INF] Generating Vary header.
2025-09-25 18:01:27.954 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 18:01:27.977 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Books/8 - 204 null null 12042.8547ms
2025-09-25 18:02:02.287 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Books/7 - null null
2025-09-25 18:02:02.307 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Books/7 - 307 0 null 20.1054ms
2025-09-25 18:02:02.318 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Books/7 - null null
2025-09-25 18:02:02.342 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 18:02:02.345 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 18:02:02.349 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 18:02:02.353 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 18:02:02.358 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 18:02:02.363 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 18:02:02.375 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 18:02:02.382 +03:00 [INF] Incomming Request: DELETE /api/Books/7
2025-09-25 18:02:02.387 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 18:02:02.397 +03:00 [INF] Route matched with {action = "Delete", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 18:02:02.428 +03:00 [INF] Executing an action Delete on controller Books.
2025-09-25 18:02:02.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN [Borrowings] AS [b0] ON [b1].[Id] = [b0].[BookId]
ORDER BY [b1].[Id]
2025-09-25 18:02:02.466 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Books]
OUTPUT 1
WHERE [Id] = @p0;
2025-09-25 18:02:02.488 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 18:02:02.493 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API) in 82.6238ms
2025-09-25 18:02:02.502 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 18:02:02.509 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 18:02:02.516 +03:00 [INF] Generating expiration headers.
2025-09-25 18:02:02.520 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 15:03:02 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 18:02:02.526 +03:00 [INF] Generating Validation headers.
2025-09-25 18:02:02.532 +03:00 [INF] Validation headers generated. ETag: Strong, "D2225E06D1A28A69BDFE3FB1BC768C58". Last-Modified: Thu, 25 Sep 2025 15:02:02 GMT
2025-09-25 18:02:02.539 +03:00 [INF] Generating Vary header.
2025-09-25 18:02:02.543 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 18:02:02.551 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Books/7 - 204 null null 237.0603ms
2025-09-25 18:05:25.497 +03:00 [INF] Starting database seeding.
2025-09-25 18:05:26.056 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 18:05:28.852 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 18:05:28.992 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 18:05:28.999 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 18:05:29.021 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 18:05:29.123 +03:00 [INF] Database seeding finished successfully.
2025-09-25 18:05:30.228 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 18:05:30.232 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 18:05:30.604 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 18:05:30.611 +03:00 [INF] Hosting environment: Development
2025-09-25 18:05:30.623 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 18:05:32.576 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5132/api/Books/6 - null null
2025-09-25 18:05:32.761 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5132/api/Books/6 - 307 0 null 186.3027ms
2025-09-25 18:05:32.872 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7266/api/Books/6 - null null
2025-09-25 18:05:32.920 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 18:05:32.925 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 18:05:32.930 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 18:05:32.939 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 18:05:32.943 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 18:05:32.949 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 18:05:33.167 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 18:05:33.183 +03:00 [INF] Incomming Request: DELETE /api/Books/6
2025-09-25 18:05:33.193 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 18:05:33.257 +03:00 [INF] Route matched with {action = "Delete", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 18:05:33.769 +03:00 [INF] Executing an action Delete on controller Books.
2025-09-25 18:05:34.407 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [b0].[Id], [b0].[BookId], [b0].[BorrowDate], [b0].[BorrowerId], [b0].[DeleteDate], [b0].[ReturnDate]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN [Borrowings] AS [b0] ON [b1].[Id] = [b0].[BookId]
ORDER BY [b1].[Id]
2025-09-25 18:05:34.901 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Books]
OUTPUT 1
WHERE [Id] = @p0;
2025-09-25 18:05:34.965 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-25 18:05:34.980 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API) in 1701.6208ms
2025-09-25 18:05:34.990 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.Delete (LibraryManagementSystem.API)'
2025-09-25 18:05:34.997 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 18:05:35.010 +03:00 [INF] Generating expiration headers.
2025-09-25 18:05:35.016 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 15:06:35 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 18:05:35.027 +03:00 [INF] Generating Validation headers.
2025-09-25 18:05:35.077 +03:00 [INF] Validation headers generated. ETag: Strong, "CECD6437E9E1FB2692288E477FF1E1CE". Last-Modified: Thu, 25 Sep 2025 15:05:35 GMT
2025-09-25 18:05:35.083 +03:00 [INF] Generating Vary header.
2025-09-25 18:05:35.086 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 18:05:35.103 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7266/api/Books/6 - 204 null null 2231.3231ms
2025-09-25 18:47:23.836 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/3 - null 0
2025-09-25 18:47:23.852 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/7/Authors/3 - 307 0 null 16.1383ms
2025-09-25 18:47:23.903 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/3 - null 0
2025-09-25 18:47:23.919 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 18:47:23.924 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 18:47:23.930 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 18:47:23.935 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 18:47:23.943 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 18:47:23.951 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 18:47:23.964 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 18:47:23.970 +03:00 [INF] Incomming Request: POST /api/Books/7/Authors/3
2025-09-25 18:47:23.976 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 18:47:24.003 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 18:47:24.023 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 18:47:24.252 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 18:47:24.495 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 18:47:46.653 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 22639.6867ms
2025-09-25 18:47:46.672 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 18:47:59.902 +03:00 [ERR] An unhandled exception has occurred while executing the request.
LibraryManagementSystem.Business.Exceptions.NotFoundException: Book with id 7 not found.
   at LibraryManagementSystem.Business.Services.BookService.ThrowNotFoundExceptionIfBookNotExist(Int32 id, Book book) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 307
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 230
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context)
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 18:48:00.118 +03:00 [WRN] A Not Found exception has occured: Book with id 7 not found.
LibraryManagementSystem.Business.Exceptions.NotFoundException: Book with id 7 not found.
   at LibraryManagementSystem.Business.Services.BookService.ThrowNotFoundExceptionIfBookNotExist(Int32 id, Book book) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 307
   at LibraryManagementSystem.Business.Services.BookService.AddAuthorToBookAsync(Int32 bookId, Int32 authorId) in F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.Business\Services\BookService.cs:line 230
   at LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync(Int32 bookId, Int32 authorId)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at LibraryBookManagementSystem.API.Middlewares.RequestLoggingHandler.Invoke(HttpContext context)
   at LibraryManagementSystem.API.Middlewares.CustomAuthorizationHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.HandleResponse(HttpContext httpContext)
   at Marvin.Cache.Headers.HttpCacheHeadersMiddleware.Invoke(HttpContext httpContext, IValidatorValueInvalidator validatorValueInvalidator)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-09-25 18:48:00.258 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/7/Authors/3 - 404 null application/problem+json 36354.5001ms
2025-09-25 18:48:06.758 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - null 0
2025-09-25 18:48:06.768 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - 307 0 null 10.2649ms
2025-09-25 18:48:06.771 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - null 0
2025-09-25 18:48:06.794 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 18:48:06.798 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 18:48:06.804 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 18:48:06.808 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 18:48:06.815 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 18:48:06.820 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 18:48:06.837 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 18:48:06.846 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/3
2025-09-25 18:48:06.851 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 18:48:06.864 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 18:48:06.893 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 18:48:06.903 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 18:48:06.922 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 18:48:07.055 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 18:48:07.099 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto'.
2025-09-25 18:48:07.148 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 271.804ms
2025-09-25 18:48:07.157 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 18:48:07.163 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 18:48:07.168 +03:00 [INF] Generating expiration headers.
2025-09-25 18:48:07.175 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 15:49:07 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 18:48:07.181 +03:00 [INF] Generating Validation headers.
2025-09-25 18:48:07.187 +03:00 [INF] Validation headers generated. ETag: Strong, "1162B0FAE08F4AF8189EB6B985752E48". Last-Modified: Thu, 25 Sep 2025 15:48:07 GMT
2025-09-25 18:48:07.193 +03:00 [INF] Generating Vary header.
2025-09-25 18:48:07.197 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 18:48:07.202 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - 201 null application/json; charset=utf-8 431.3591ms
2025-09-25 21:31:04.386 +03:00 [INF] Starting database seeding.
2025-09-25 21:31:05.079 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 21:31:08.358 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 21:31:08.502 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 21:31:08.515 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 21:31:08.573 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 21:31:08.707 +03:00 [INF] Database seeding finished successfully.
2025-09-25 21:31:09.695 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 21:31:09.698 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 21:31:10.008 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 21:31:10.012 +03:00 [INF] Hosting environment: Development
2025-09-25 21:31:10.017 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 21:31:17.133 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - null 0
2025-09-25 21:31:17.261 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - 307 0 null 137.0999ms
2025-09-25 21:31:17.346 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - null 0
2025-09-25 21:31:17.379 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 21:31:17.382 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 21:31:17.386 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 21:31:17.392 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 21:31:17.404 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 21:31:17.406 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 21:31:17.575 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 21:31:17.587 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/3
2025-09-25 21:31:17.593 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 21:31:17.655 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 21:31:18.164 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 21:31:18.616 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 21:31:18.968 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 21:31:19.148 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 21:31:19.276 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 1603.5638ms
2025-09-25 21:31:19.290 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 21:31:19.301 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 21:31:19.312 +03:00 [INF] Generating expiration headers.
2025-09-25 21:31:19.321 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 18:32:19 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 21:31:19.330 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 21:31:19.343 +03:00 [INF] Generating Vary header.
2025-09-25 21:31:19.348 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 21:31:19.369 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - 400 null text/plain; charset=utf-8 2022.6473ms
2025-09-25 21:54:32.354 +03:00 [INF] Starting database seeding.
2025-09-25 21:54:33.031 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 21:54:38.431 +03:00 [INF] Executed DbCommand (232ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 21:54:38.657 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 21:54:38.669 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 21:54:38.718 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 21:54:38.834 +03:00 [INF] Database seeding finished successfully.
2025-09-25 21:54:40.101 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 21:54:40.106 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 21:54:40.381 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 21:54:40.386 +03:00 [INF] Hosting environment: Development
2025-09-25 21:54:40.390 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 21:54:45.734 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - null 0
2025-09-25 21:54:45.863 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - 307 0 null 135.6207ms
2025-09-25 21:54:45.955 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - null 0
2025-09-25 21:54:45.996 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 21:54:46.001 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 21:54:46.006 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 21:54:46.015 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 21:54:46.019 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 21:54:46.024 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 21:54:46.203 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 21:54:46.220 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/3
2025-09-25 21:54:46.229 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 21:54:46.296 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 21:54:46.598 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 21:54:46.928 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 21:54:47.175 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 21:54:47.254 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 21:54:47.268 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 949.2703ms
2025-09-25 21:54:47.275 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 21:54:47.281 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 21:54:47.288 +03:00 [INF] Generating expiration headers.
2025-09-25 21:54:47.293 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 18:55:47 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 21:54:47.299 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 21:54:47.302 +03:00 [INF] Generating Vary header.
2025-09-25 21:54:47.305 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 21:54:47.315 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - 400 null text/plain; charset=utf-8 1360.5957ms
2025-09-25 21:58:27.136 +03:00 [INF] Starting database seeding.
2025-09-25 21:58:27.785 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 21:58:30.972 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 21:58:31.216 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 21:58:31.225 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 21:58:31.259 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 21:58:31.382 +03:00 [INF] Database seeding finished successfully.
2025-09-25 21:58:32.080 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 21:58:32.083 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 21:58:32.320 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 21:58:32.324 +03:00 [INF] Hosting environment: Development
2025-09-25 21:58:32.329 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 21:58:37.473 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - null 0
2025-09-25 21:58:37.588 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - 307 0 null 127.6202ms
2025-09-25 21:58:37.673 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - null 0
2025-09-25 21:58:37.712 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 21:58:37.718 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 21:58:37.723 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 21:58:37.732 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 21:58:37.735 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 21:58:37.739 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 21:58:37.889 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 21:58:37.900 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/3
2025-09-25 21:58:37.907 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 21:58:37.947 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 21:58:38.237 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 21:58:38.589 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 21:58:38.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 21:58:38.977 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 21:58:38.993 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 1033.9968ms
2025-09-25 21:58:39.002 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 21:58:39.009 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 21:58:39.017 +03:00 [INF] Generating expiration headers.
2025-09-25 21:58:39.021 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 18:59:39 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 21:58:39.029 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 21:58:39.033 +03:00 [INF] Generating Vary header.
2025-09-25 21:58:39.037 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 21:58:39.053 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - 400 null text/plain; charset=utf-8 1380.4573ms
2025-09-25 21:58:43.510 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - null 0
2025-09-25 21:58:43.647 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - 307 0 null 137.2216ms
2025-09-25 21:58:43.654 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - null 0
2025-09-25 21:58:43.684 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 21:58:43.687 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 21:58:43.690 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 21:58:43.692 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 21:58:43.695 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 21:58:43.697 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 21:58:43.702 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 21:58:43.706 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/3
2025-09-25 21:58:43.709 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 21:58:43.714 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 21:58:43.729 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 21:58:43.768 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 21:58:43.794 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 21:58:43.822 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 21:58:43.859 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 137.159ms
2025-09-25 21:58:43.971 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 21:58:43.993 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 21:58:44.005 +03:00 [INF] Generating expiration headers.
2025-09-25 21:58:44.025 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 18:59:44 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 21:58:44.082 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 21:58:44.088 +03:00 [INF] Generating Vary header.
2025-09-25 21:58:44.094 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 21:58:44.105 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - 400 null text/plain; charset=utf-8 450.8085ms
2025-09-25 22:00:07.646 +03:00 [INF] Starting database seeding.
2025-09-25 22:00:08.320 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 22:00:11.001 +03:00 [INF] Executed DbCommand (96ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:00:11.165 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:00:11.176 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:00:11.207 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 22:00:11.302 +03:00 [INF] Database seeding finished successfully.
2025-09-25 22:00:12.025 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 22:00:12.028 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 22:00:12.320 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 22:00:12.324 +03:00 [INF] Hosting environment: Development
2025-09-25 22:00:12.330 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 22:07:22.162 +03:00 [INF] Starting database seeding.
2025-09-25 22:07:22.621 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 22:07:25.455 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:07:25.712 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:07:25.727 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:07:25.780 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 22:07:25.913 +03:00 [INF] Database seeding finished successfully.
2025-09-25 22:07:26.846 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 22:07:26.858 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 22:07:27.105 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 22:07:27.238 +03:00 [INF] Hosting environment: Development
2025-09-25 22:07:27.243 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 22:08:10.149 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - null 0
2025-09-25 22:08:10.484 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 22:08:10.522 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - 307 0 null 438.2359ms
2025-09-25 22:08:10.616 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - null 0
2025-09-25 22:08:10.632 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 22:08:10.665 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 22:08:10.668 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 22:08:10.674 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 22:08:10.681 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 22:08:10.684 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 22:08:10.692 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 22:08:10.705 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/3
2025-09-25 22:08:10.712 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:08:10.770 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 22:08:11.209 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 22:08:11.849 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 22:08:12.300 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 22:08:12.516 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 22:08:12.552 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 1757.5213ms
2025-09-25 22:08:12.565 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:08:12.578 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 22:08:12.599 +03:00 [INF] Generating expiration headers.
2025-09-25 22:08:12.606 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 19:09:12 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 22:08:12.622 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 22:08:12.632 +03:00 [INF] Generating Vary header.
2025-09-25 22:08:12.640 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 22:08:12.678 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - 400 null text/plain; charset=utf-8 2062.0216ms
2025-09-25 22:09:05.701 +03:00 [INF] Starting database seeding.
2025-09-25 22:09:06.307 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 22:09:09.110 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:09:09.301 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:09:09.312 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:09:09.349 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 22:09:09.444 +03:00 [INF] Database seeding finished successfully.
2025-09-25 22:09:10.176 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 22:09:10.179 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 22:09:10.437 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 22:09:10.442 +03:00 [INF] Hosting environment: Development
2025-09-25 22:09:10.448 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 22:09:18.255 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - null 0
2025-09-25 22:09:18.456 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - 307 0 null 218.054ms
2025-09-25 22:09:18.571 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - null 0
2025-09-25 22:09:18.622 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 22:09:18.626 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 22:09:18.630 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 22:09:18.638 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 22:09:18.641 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 22:09:18.648 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 22:09:18.894 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 22:09:18.926 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/3
2025-09-25 22:09:18.938 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:09:19.047 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 22:09:19.537 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 22:09:20.168 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 22:09:20.580 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 22:09:20.709 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 22:09:20.733 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 1664.3891ms
2025-09-25 22:09:20.750 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:09:20.761 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 22:09:20.775 +03:00 [INF] Generating expiration headers.
2025-09-25 22:09:20.781 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 19:10:20 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 22:09:20.791 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 22:09:20.796 +03:00 [INF] Generating Vary header.
2025-09-25 22:09:20.801 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 22:09:20.820 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - 400 null text/plain; charset=utf-8 2249.5091ms
2025-09-25 22:13:31.895 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - null 0
2025-09-25 22:13:31.913 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - 307 0 null 19.2715ms
2025-09-25 22:13:31.918 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - null 0
2025-09-25 22:13:31.937 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 22:13:31.944 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 22:13:31.952 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 22:13:31.959 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 22:13:31.966 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 22:13:31.973 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 22:13:31.983 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 22:13:31.993 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/3
2025-09-25 22:13:31.997 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:13:32.005 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 22:13:32.019 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 22:13:32.054 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 22:13:32.089 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 22:13:32.152 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 22:13:32.160 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 146.4582ms
2025-09-25 22:13:32.176 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:13:32.196 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 22:13:32.203 +03:00 [INF] Generating expiration headers.
2025-09-25 22:13:32.210 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 19:14:32 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 22:13:32.220 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 22:13:32.222 +03:00 [INF] Generating Vary header.
2025-09-25 22:13:32.225 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 22:13:32.229 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - 400 null text/plain; charset=utf-8 311.1768ms
2025-09-25 22:17:24.360 +03:00 [INF] Starting database seeding.
2025-09-25 22:17:26.344 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 22:17:32.666 +03:00 [INF] Executed DbCommand (279ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:17:32.885 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:17:32.893 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:17:32.924 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 22:17:33.015 +03:00 [INF] Database seeding finished successfully.
2025-09-25 22:17:35.184 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 22:17:35.187 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 22:17:35.518 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 22:17:35.522 +03:00 [INF] Hosting environment: Development
2025-09-25 22:17:35.528 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 22:17:58.401 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5132/api/Books/3/Authors/3 - null null
2025-09-25 22:17:59.381 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5132/api/Books/3/Authors/3 - 307 0 null 1006.9847ms
2025-09-25 22:17:59.526 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/api/Books/3/Authors/3 - null null
2025-09-25 22:17:59.560 +03:00 [INF] No cached response available for this request.
2025-09-25 22:17:59.596 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 22:17:59.612 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-25 22:17:59.617 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 22:17:59.630 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 22:17:59.636 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 22:17:59.643 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 22:18:03.545 +03:00 [INF] Incomming Request: GET /api/Books/3/Authors/3
2025-09-25 22:18:03.553 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-25 22:18:03.560 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-25 22:18:03.635 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 22:18:03.645 +03:00 [INF] Generating expiration headers.
2025-09-25 22:18:03.651 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 19:19:03 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 22:18:03.664 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 22:18:03.669 +03:00 [INF] Generating Vary header.
2025-09-25 22:18:03.676 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 22:18:03.696 +03:00 [INF] The response could not be cached for this request.
2025-09-25 22:18:03.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/api/Books/3/Authors/3 - 405 null application/problem+json 4176.8084ms
2025-09-25 22:18:03.977 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/favicon.ico - null null
2025-09-25 22:18:03.987 +03:00 [INF] No cached response available for this request.
2025-09-25 22:18:03.990 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 22:18:03.993 +03:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2025-09-25 22:18:03.995 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 22:18:03.998 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 22:18:04.000 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 22:18:04.003 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 22:18:04.007 +03:00 [INF] Incomming Request: GET /favicon.ico
2025-09-25 22:18:04.011 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 22:18:04.014 +03:00 [INF] Generating expiration headers.
2025-09-25 22:18:04.016 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 19:19:04 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 22:18:04.020 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 22:18:04.022 +03:00 [INF] Generating Vary header.
2025-09-25 22:18:04.024 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 22:18:04.026 +03:00 [INF] The response could not be cached for this request.
2025-09-25 22:18:04.028 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/favicon.ico - 404 null application/problem+json 51.918ms
2025-09-25 22:18:04.037 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7266/favicon.ico, Response status code: 404
2025-09-25 22:21:32.146 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - null 0
2025-09-25 22:21:32.154 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5132/api/Books/3/Authors/3 - 307 0 null 8.3237ms
2025-09-25 22:21:32.175 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - null 0
2025-09-25 22:21:32.183 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 22:21:32.185 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 22:21:32.188 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 22:21:32.191 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 22:21:32.194 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 22:21:32.197 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 22:21:32.211 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 22:21:32.229 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/3
2025-09-25 22:21:32.242 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:21:32.377 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 22:21:32.973 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 22:21:33.480 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 22:21:33.910 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 22:21:34.113 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 22:21:34.139 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 1730.4605ms
2025-09-25 22:21:34.157 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:21:34.176 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 22:21:34.186 +03:00 [INF] Generating expiration headers.
2025-09-25 22:21:34.190 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 19:22:34 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 22:21:34.206 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 22:21:34.212 +03:00 [INF] Generating Vary header.
2025-09-25 22:21:34.218 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 22:21:34.241 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7266/api/Books/3/Authors/3 - 400 null text/plain; charset=utf-8 2066.1881ms
2025-09-25 22:31:37.790 +03:00 [INF] Starting database seeding.
2025-09-25 22:31:38.349 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 22:31:41.591 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:31:41.753 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:31:41.762 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-25 22:31:41.795 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PersonId], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 22:31:41.928 +03:00 [INF] Database seeding finished successfully.
2025-09-25 22:31:42.824 +03:00 [INF] Now listening on: https://localhost:7266
2025-09-25 22:31:42.829 +03:00 [INF] Now listening on: http://localhost:5132
2025-09-25 22:31:43.287 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 22:31:43.290 +03:00 [INF] Hosting environment: Development
2025-09-25 22:31:43.293 +03:00 [INF] Content root path: F:\RestfulApiCourse\LibrarySystem\LibraryManagementSystem.API
2025-09-25 22:31:44.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/swagger - null null
2025-09-25 22:31:45.127 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/swagger - 301 0 null 301.4856ms
2025-09-25 22:31:45.135 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/swagger/index.html - null null
2025-09-25 22:31:45.427 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/swagger/swagger-ui.css - null null
2025-09-25 22:31:45.431 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 22:31:45.437 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/swagger/index.html - 200 null text/html;charset=utf-8 301.6928ms
2025-09-25 22:31:45.427 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/swagger/swagger-ui-bundle.js - null null
2025-09-25 22:31:45.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/swagger/swagger-ui-standalone-preset.js - null null
2025-09-25 22:31:45.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/_vs/browserLink - null null
2025-09-25 22:31:45.467 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/_framework/aspnetcore-browser-refresh.js - 200 16539 application/javascript; charset=utf-8 36.321ms
2025-09-25 22:31:45.493 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-09-25 22:31:45.502 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-09-25 22:31:45.518 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/swagger/swagger-ui.css - 200 152034 text/css 91.1865ms
2025-09-25 22:31:45.536 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 105.673ms
2025-09-25 22:31:45.551 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-09-25 22:31:45.568 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 140.9448ms
2025-09-25 22:31:45.837 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/_vs/browserLink - 200 null text/javascript; charset=UTF-8 406.7199ms
2025-09-25 22:31:45.979 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/swagger/v1/swagger.json - null null
2025-09-25 22:31:46.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7266/swagger/favicon-32x32.png - null null
2025-09-25 22:31:46.053 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-09-25 22:31:46.060 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/swagger/favicon-32x32.png - 200 628 image/png 15.0335ms
2025-09-25 22:31:46.437 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7266/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 457.8598ms
2025-09-25 22:34:14.269 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7266/api/Books/5/Authors/2 - null 0
2025-09-25 22:34:14.326 +03:00 [INF] CORS policy execution successful.
2025-09-25 22:34:14.353 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 22:34:14.357 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 22:34:14.362 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 22:34:14.367 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 22:34:14.370 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 22:34:14.375 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 22:34:14.535 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 22:34:14.547 +03:00 [INF] Incomming Request: POST /api/Books/5/Authors/2
2025-09-25 22:34:14.554 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:34:14.610 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 22:34:14.985 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 22:34:15.393 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 22:34:15.671 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 22:34:16.027 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 22:34:16.113 +03:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2025-09-25 22:34:16.137 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 1505.4895ms
2025-09-25 22:34:16.145 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:34:16.156 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 22:34:16.169 +03:00 [INF] Generating expiration headers.
2025-09-25 22:34:16.175 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 19:35:16 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 22:34:16.184 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 22:34:16.190 +03:00 [INF] Generating Vary header.
2025-09-25 22:34:16.195 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 22:34:16.209 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7266/api/Books/5/Authors/2 - 406 0 null 1939.453ms
2025-09-25 22:35:25.059 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7266/api/Books/5/Authors/2 - null 0
2025-09-25 22:35:25.087 +03:00 [INF] CORS policy execution successful.
2025-09-25 22:35:25.102 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 22:35:25.135 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 22:35:25.170 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 22:35:25.177 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 22:35:25.183 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 22:35:25.189 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 22:35:25.196 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 22:35:25.204 +03:00 [INF] Incomming Request: POST /api/Books/5/Authors/2
2025-09-25 22:35:25.207 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:35:25.212 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 22:35:25.224 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 22:35:25.267 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 22:35:25.294 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 22:35:25.354 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 22:35:25.369 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 149.646ms
2025-09-25 22:35:25.382 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:35:25.392 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 22:35:25.401 +03:00 [INF] Generating expiration headers.
2025-09-25 22:35:25.409 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 19:36:25 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 22:35:25.415 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 22:35:25.420 +03:00 [INF] Generating Vary header.
2025-09-25 22:35:25.427 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 22:35:25.434 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7266/api/Books/5/Authors/2 - 400 null application/json; charset=utf-8 375.1553ms
2025-09-25 22:35:57.226 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7266/api/Books/3/Authors/2 - null 0
2025-09-25 22:35:57.239 +03:00 [INF] CORS policy execution successful.
2025-09-25 22:35:57.243 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 22:35:57.245 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 22:35:57.253 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 22:35:57.269 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 22:35:57.286 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 22:35:57.302 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 22:35:57.318 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 22:35:57.331 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/2
2025-09-25 22:35:57.339 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:35:57.349 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 22:35:57.382 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 22:35:57.391 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 22:35:57.440 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 22:35:57.482 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BookAuthors] ([AuthorsId], [BooksId])
VALUES (@p0, @p1);
2025-09-25 22:35:57.498 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'LibraryManagementSystem.Business.Dtos.BookDtos.BookDetailsDto'.
2025-09-25 22:35:57.578 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 216.3253ms
2025-09-25 22:35:57.589 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:35:57.597 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 22:35:57.602 +03:00 [INF] Generating expiration headers.
2025-09-25 22:35:57.606 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 19:36:57 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 22:35:57.613 +03:00 [INF] Generating Validation headers.
2025-09-25 22:35:57.652 +03:00 [INF] Validation headers generated. ETag: Strong, "602F37FCB3E952C3CCB7E9A0CA2B04F4". Last-Modified: Thu, 25 Sep 2025 19:35:57 GMT
2025-09-25 22:35:57.658 +03:00 [INF] Generating Vary header.
2025-09-25 22:35:57.664 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 22:35:57.667 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7266/api/Books/3/Authors/2 - 201 null application/json; charset=utf-8 441.7831ms
2025-09-25 22:36:07.728 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7266/api/Books/3/Authors/2 - null 0
2025-09-25 22:36:07.738 +03:00 [INF] CORS policy execution successful.
2025-09-25 22:36:07.742 +03:00 [INF] Checking for conditional GET/HEAD.
2025-09-25 22:36:07.746 +03:00 [INF] Not valid - method isn't GET or HEAD.
2025-09-25 22:36:07.753 +03:00 [INF] Don't generate 304 - Not Modified.  Continue.
2025-09-25 22:36:07.761 +03:00 [INF] Checking for conditional PUT/PATCH.
2025-09-25 22:36:07.827 +03:00 [INF] Not valid - method isn't PUT or PATCH.
2025-09-25 22:36:07.847 +03:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2025-09-25 22:36:07.853 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-25 22:36:07.864 +03:00 [INF] Incomming Request: POST /api/Books/3/Authors/2
2025-09-25 22:36:07.870 +03:00 [INF] Executing endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:36:07.878 +03:00 [INF] Route matched with {action = "AddAuthorToBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAuthorToBookAsync(Int32, Int32) on controller LibraryManagementSystem.API.Controllers.BooksController (LibraryManagementSystem.API).
2025-09-25 22:36:07.887 +03:00 [INF] Executing an action AddAuthorToBook on controller Books.
2025-09-25 22:36:07.893 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id], [p].[FirstName], [p].[LastName]
FROM [Authors] AS [a]
INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
WHERE [a].[Id] = @__id_0
2025-09-25 22:36:07.903 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b1].[Id], [b1].[DeleteDate], [b1].[ISBN], [b1].[PublishYear], [b1].[Title], [s].[AuthorsId], [s].[BooksId], [s].[Id], [s].[Biography], [s].[PersonId], [s].[Id0], [s].[FirstName], [s].[LastName]
FROM (
    SELECT TOP(2) [b].[Id], [b].[DeleteDate], [b].[ISBN], [b].[PublishYear], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__id_0
) AS [b1]
LEFT JOIN (
    SELECT [b0].[AuthorsId], [b0].[BooksId], [a].[Id], [a].[Biography], [a].[PersonId], [p].[Id] AS [Id0], [p].[FirstName], [p].[LastName]
    FROM [BookAuthors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorsId] = [a].[Id]
    INNER JOIN [Persons] AS [p] ON [a].[PersonId] = [p].[Id]
) AS [s] ON [b1].[Id] = [s].[BooksId]
ORDER BY [b1].[Id], [s].[AuthorsId], [s].[BooksId], [s].[Id]
2025-09-25 22:36:07.938 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-09-25 22:36:07.949 +03:00 [INF] Executed action LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API) in 62.7191ms
2025-09-25 22:36:07.959 +03:00 [INF] Executed endpoint 'LibraryManagementSystem.API.Controllers.BooksController.AddAuthorToBookAsync (LibraryManagementSystem.API)'
2025-09-25 22:36:07.965 +03:00 [INF] Outgoing Response: {Status Code}
2025-09-25 22:36:07.975 +03:00 [INF] Generating expiration headers.
2025-09-25 22:36:07.980 +03:00 [INF] Expiration headers generated. Expires: Thu, 25 Sep 2025 19:37:07 GMT. Cache-Control: public,max-age=60,must-revalidate.
2025-09-25 22:36:07.988 +03:00 [INF] Not generating Validation headers as the response status code does not indicate success.
2025-09-25 22:36:07.992 +03:00 [INF] Generating Vary header.
2025-09-25 22:36:07.996 +03:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2025-09-25 22:36:08.004 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7266/api/Books/3/Authors/2 - 400 null application/json; charset=utf-8 275.4887ms
